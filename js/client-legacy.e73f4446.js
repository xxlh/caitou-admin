(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[818],{99047:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"默认登录/注册方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["registerMethod",{rules:[{required:!0}]}],expression:"['registerMethod', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("手机号 + 短信验证码")])],1),t("div",{staticClass:"form-item-help"},[t("p",{staticClass:"extra"},[t("small",[e._v("发送短信服务需要先配置")]),t("router-link",{attrs:{target:"_blank",to:{path:"/setting/sms"}}},[e._v("短信通知设置")])],1),t("p",{staticClass:"extra"},[e._v("使用手机号作为主账户可以实现多种客户端的账户统一，例如H5和微信小程序")])])],1),t("a-divider",{attrs:{orientation:"left"}},[e._v("微信小程序授权登录")]),t("a-form-item",{attrs:{label:"一键授权登录/注册",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isOauthMpweixin",{rules:[{required:!0}]}],expression:"['isOauthMpweixin', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[t("span",[e._v("开启")]),t("a-tag",{staticClass:"ml-5",attrs:{color:"green"}},[e._v("推荐")])],1),t("a-radio",{attrs:{value:0}},[e._v("关闭")])],1),t("div",{staticClass:"form-item-help"},[t("small",[e._v("开启后在微信小程序端一键获取用户授权并登录和注册")])])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.getFieldValue("isOauthMpweixin"),expression:"form.getFieldValue('isOauthMpweixin') == 1"}],attrs:{label:"注册时绑定手机号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isForceBindMpweixin",{rules:[{required:!0}]}],expression:"['isForceBindMpweixin', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[t("span",[e._v("强制绑定")]),t("a-tag",{staticClass:"ml-5",attrs:{color:"green"}},[e._v("推荐")])],1),t("a-radio",{attrs:{value:0}},[e._v("不绑定")])],1),t("div",{staticClass:"form-item-help"},[t("p",{staticClass:"extra"},[e._v("开启后在微信小程序端一键授权注册时强制绑定手机号，仅首次注册时弹出")]),t("p",{directives:[{name:"show",rawName:"v-show",value:0==e.form.getFieldValue("isForceBindMpweixin"),expression:"form.getFieldValue('isForceBindMpweixin') == 0"}],staticClass:"extra c-red"},[e._v("如果不强制绑定手机号，会造成多端情况下同一个用户注册多个账户，强烈推荐绑定手机号")])])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.getFieldValue("isOauthMpweixin")&&0==e.form.getFieldValue("isForceBindMpweixin"),expression:"form.getFieldValue('isOauthMpweixin') == 1 && form.getFieldValue('isForceBindMpweixin') == 0"}],attrs:{label:"手动绑定手机号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isManualBind",{rules:[{required:!0}]}],expression:"['isManualBind', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("显示")]),t("a-radio",{attrs:{value:0}},[e._v("不显示")])],1),t("div",{staticClass:"form-item-help"},[t("small",[e._v("用户在个人中心页可以手动操作绑定手机号")])])],1),t("a-form-item",{attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)},i=[],n=(r(26099),r(62953),r(91863)),s=r.n(n),o=r(61145),l=r(25962),u=r(21290),c={data:function(){return{SettingSmsSceneEnum:u.A,key:"register",labelCol:{span:4},wrapperCol:{span:10},isLoading:!1,form:this.$form.createForm(this),record:{}}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.isLoading=!0,l._(this.key).then((function(t){e.record=t.data.values,e.setFieldsValue()})).finally((function(t){e.isLoading=!1}))},setFieldsValue:function(){var e=this.record,t=this.$nextTick,r=this.form;!(0,o.Im)(r.getFieldsValue())&&t((function(){r.setFieldsValue(s()(e,["registerMethod","isManualBind","isOauthMpweixin","isForceBindMpweixin"]))}))},handleSubmit:function(e){var t=this;e.preventDefault();var r=this.form.validateFields;r((function(e,r){!e&&t.onFormSubmit(r)}))},onFormSubmit:function(e){var t=this;this.isLoading=!0,l.y(this.key,{form:e}).then((function(e){t.$message.success(e.message,1.5)})).finally((function(e){t.isLoading=!1}))}}},p=c,d=r(81656),m=(0,d.A)(p,a,i,!1,null,"1e3b16a8",null),f=m.exports},36580:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{staticClass:"mt-30",attrs:{label:"是否开启访问",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["enabled",{rules:[{required:!0}]}],expression:"['enabled', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("开启")]),t("a-radio",{attrs:{value:0}},[e._v("关闭")])],1),t("div",{staticClass:"form-item-help"},[t("p",{staticClass:"extra"},[t("span",[e._v("注：如关闭，用户则无法通过H5端访问商城")])])])],1),t("a-form-item",{attrs:{label:"H5站点地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["baseUrl",{rules:[{required:!0,message:"请输入H5站点地址"}]}],expression:"['baseUrl', { rules: [{ required: true, message: '请输入H5站点地址' }] }]"}]}),t("div",{staticClass:"form-item-help"},[t("p",{staticClass:"extra"},[t("span",[e._v("请填写H5端实际的访问地址，以")]),t("a-tag",{staticClass:"mlr-5"},[e._v("https://")]),e._v("开头； 斜杠 "),t("a-tag",{staticClass:"mlr-5"},[e._v("/")]),t("span",[e._v("结尾")])],1),t("p",{staticClass:"extra"},[t("span",[e._v("例如：https://www.aaa.com/")])])])],1),t("a-form-item",{attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)},i=[],n=(r(26099),r(91863)),s=r.n(n),o=r(61145),l=r(57888),u=r(26222),c={detail:"/client.h5.setting/detail",update:"/client.h5.setting/update"};function p(e){return(0,u.p)({url:c.detail,method:"get",params:{key:e}})}function d(e,t){return(0,u.p)({url:c.update,method:"post",data:(0,l.A)({key:e},t)})}var m={data:function(){return{labelCol:{span:4},wrapperCol:{span:10},isLoading:!1,form:this.$form.createForm(this),key:"basic",record:{}}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.isLoading=!0,p(this.key).then((function(t){e.record=t.data.detail,e.setFieldsValue()})).finally((function(t){e.isLoading=!1}))},setFieldsValue:function(){var e=this.record,t=this.$nextTick,r=this.form;!(0,o.Im)(r.getFieldsValue())&&t((function(){r.setFieldsValue(s()(e,["enabled","baseUrl"]))}))},handleSubmit:function(e){var t=this;e.preventDefault();var r=this.form.validateFields;r((function(e,r){!e&&t.onFormSubmit(r)}))},onFormSubmit:function(e){var t=this;this.isLoading=!0,d(this.key,{form:e}).then((function(e){t.$message.success(e.message,1.5)})).finally((function(e){t.isLoading=!1}))}}},f=m,v=r(81656),h=(0,v.A)(f,a,i,!1,null,"0d8ee9ca",null),b=h.exports},34225:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{staticClass:"mt-30",attrs:{label:"小程序 AppID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_id",{rules:[{required:!0,message:"请输入小程序AppID"}]}],expression:"['app_id', { rules: [{ required: true, message: '请输入小程序AppID' }] }]"}]})],1),t("a-form-item",{attrs:{label:"小程序 AppSecret",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_secret",{rules:[{required:!0,message:"请输入小程序AppSecret"}]}],expression:"['app_secret', { rules: [{ required: true, message: '请输入小程序AppSecret' }] }]"}],attrs:{type:"password"}})],1),t("a-divider",{attrs:{orientation:"left"}},[e._v("微信小程序支付")]),t("a-form-item",{attrs:{label:"微信商户号 MCHID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mchid",{rules:[{required:!0,message:"请输入微信商户号mchid"}]}],expression:"['mchid', { rules: [{ required: true, message: '请输入微信商户号mchid' }] }]"}]})],1),t("a-form-item",{attrs:{label:"微信支付密钥 APIKEY",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["apikey",{rules:[{required:!0,message:"请输入微信支付密钥"}]}],expression:"['apikey', { rules: [{ required: true, message: '请输入微信支付密钥' }] }]"}],attrs:{type:"password"}})],1),t("a-form-item",{staticClass:"mt-40",attrs:{label:"证书文件cert",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["cert_pem"],expression:"['cert_pem']"}],attrs:{autoSize:{minRows:4,maxRows:6}}}),t("div",{staticClass:"form-item-help"},[t("small",[e._v("使用文本编辑器打开apiclient_cert.pem文件，将文件的全部内容复制进来")])])],1),t("a-form-item",{attrs:{label:"证书文件key",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["key_pem"],expression:"['key_pem']"}],attrs:{autoSize:{minRows:4,maxRows:6}}}),t("div",{staticClass:"form-item-help"},[t("small",[e._v("使用文本编辑器打开apiclient_key.pem文件，将文件的全部内容复制进来")])])],1),t("a-form-item",{attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)},i=[],n=(r(26099),r(91863)),s=r.n(n),o=r(61145),l=r(57888),u=r(26222),c={detail:"/client.wxapp.setting/detail",update:"/client.wxapp.setting/update"};function p(e){return(0,u.p)({url:c.detail,method:"get",params:{key:e}})}function d(e,t){return(0,u.p)({url:c.update,method:"post",data:(0,l.A)({key:e},t)})}var m={data:function(){return{labelCol:{span:4},wrapperCol:{span:10},isLoading:!1,form:this.$form.createForm(this),key:"basic",record:{}}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.isLoading=!0,p(this.key).then((function(t){e.record=t.data.detail,e.setFieldsValue()})).finally((function(t){e.isLoading=!1}))},setFieldsValue:function(){var e=this.record,t=this.$nextTick,r=this.form;!(0,o.Im)(r.getFieldsValue())&&t((function(){r.setFieldsValue(s()(e,["app_id","app_secret","mchid","apikey","cert_pem","key_pem"]))}))},handleSubmit:function(e){var t=this;e.preventDefault();var r=this.form.validateFields;r((function(e,r){!e&&t.onFormSubmit(r)}))},onFormSubmit:function(e){var t=this;this.isLoading=!0,d(this.key,{form:e}).then((function(e){t.$message.success(e.message,1.5)})).finally((function(e){t.isLoading=!1}))}}},f=m,v=r(81656),h=(0,v.A)(f,a,i,!1,null,"42865d94",null),b=h.exports},25962:function(e,t,r){"use strict";r.d(t,{_:function(){return s},y:function(){return o}});var a=r(57888),i=r(26222),n={detail:"/setting/detail",update:"/setting/update"};function s(e){return(0,i.p)({url:n.detail,method:"get",params:{key:e}})}function o(e,t){return(0,i.p)({url:n.update,method:"post",data:(0,a.A)({key:e},t)})}},35230:function(e,t,r){"use strict";var a=r(93492),i=r(25418),n=(r(62062),r(62010),r(52811),function(){function e(t){var r=this;(0,a.A)(this,e);var i=[],n=[];if(!Array.isArray(t))throw new Error("param is not an array!");t.map((function(e){e.key&&e.name&&(i.push(e.key),n.push(e.value),r[e.key]=e,e.key!==e.value&&(r[e.value]=e))})),this.data=t,this.keyArr=i,this.valueArr=n,Object.freeze(this)}return(0,i.A)(e,[{key:"keyOf",value:function(e){return this.data[this.keyArr.indexOf(e)]}},{key:"valueOf",value:function(e){return this.data[this.valueArr.indexOf(e)]}},{key:"getNameByKey",value:function(e){var t=this.keyOf(e);if(!t)throw new Error("No enum constant"+e);return t.name}},{key:"getNameByValue",value:function(e){var t=this.valueOf(e);if(!t)throw new Error("No enum constant"+e);return t.name}},{key:"getValueByKey",value:function(e){var t=this.keyOf(e);if(!t)throw new Error("No enum constant"+e);return t.key}},{key:"getData",value:function(){return this.data}}])}());t.A=n},21290:function(e,t,r){"use strict";var a=r(35230);t.A=new a.A([{key:"CAPTCHA",name:"短信验证码",value:"captcha"},{key:"ORDER_PAY",name:"新付款订单",value:"order_pay"}])},91863:function(e,t,r){var a=1/0,i=9007199254740991,n="[object Arguments]",s="[object Function]",o="[object GeneratorFunction]",l="[object Symbol]",u="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,p=u||c||Function("return this")();function d(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function m(e,t){var r=-1,a=e?e.length:0,i=Array(a);while(++r<a)i[r]=t(e[r],r,e);return i}function f(e,t){var r=-1,a=t.length,i=e.length;while(++r<a)e[i+r]=t[r];return e}var v=Object.prototype,h=v.hasOwnProperty,b=v.toString,g=p.Symbol,w=v.propertyIsEnumerable,y=g?g.isConcatSpreadable:void 0,C=Math.max;function _(e,t,r,a,i){var n=-1,s=e.length;r||(r=A),i||(i=[]);while(++n<s){var o=e[n];t>0&&r(o)?t>1?_(o,t-1,r,a,i):f(i,o):a||(i[i.length]=o)}return i}function x(e,t){return e=Object(e),k(e,t,(function(t,r){return r in e}))}function k(e,t,r){var a=-1,i=t.length,n={};while(++a<i){var s=t[a],o=e[s];r(o,s)&&(n[s]=o)}return n}function F(e,t){return t=C(void 0===t?e.length-1:t,0),function(){var r=arguments,a=-1,i=C(r.length-t,0),n=Array(i);while(++a<i)n[a]=r[t+a];a=-1;var s=Array(t+1);while(++a<t)s[a]=r[a];return s[t]=n,d(e,this,s)}}function A(e){return M(e)||S(e)||!!(y&&e&&e[y])}function O(e){if("string"==typeof e||B(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function S(e){return q(e)&&h.call(e,"callee")&&(!w.call(e,"callee")||b.call(e)==n)}var M=Array.isArray;function V(e){return null!=e&&L(e.length)&&!N(e)}function q(e){return D(e)&&V(e)}function N(e){var t=j(e)?b.call(e):"";return t==s||t==o}function L(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function D(e){return!!e&&"object"==typeof e}function B(e){return"symbol"==typeof e||D(e)&&b.call(e)==l}var $=F((function(e,t){return null==e?{}:x(e,m(_(t,1),O))}));e.exports=$},93492:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{A:function(){return a}})},25418:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var a=r(41423);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,a.A)(i.key),i)}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}}}]);
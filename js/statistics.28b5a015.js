(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["statistics"],{29543:function(t,e,a){"use strict";a.r(e);var s={};a.r(s),a.d(s,"overview",(function(){return w})),a.d(s,"statistics",(function(){return j}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-spin",{attrs:{spinning:t.isLoading}},[a("div",{staticClass:"container"},[a("a-card",{staticClass:"overview",attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[a("span",[t._v("数据概况")])]),a("div",{staticClass:"screen flex flex-x-center"},[a("a-range-picker",{attrs:{format:"YYYY-MM-DD"},on:{change:t.onPickerChange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}}),a("div",{staticClass:"shortcut"},[a("div",{staticClass:"shortcut-days"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.handleFastDate(7)}}},[t._v("7天")]),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.handleFastDate(30)}}},[t._v("30天")]),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.handleFastDate(0)}}},[t._v("清空")])])])],1),a("a-row",{staticClass:"mt-20",attrs:{gutter:32}},[a("a-col",{attrs:{span:8}},[a("div",{staticClass:"item flex"},[a("div",{staticClass:"col-left"},[a("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[a("a-icon",{attrs:{component:t.Icons.overview.sale}})],1)]),a("div",{staticClass:"col-right"},[a("p",{staticClass:"name"},[t._v("销售额 (元)")]),a("p",{staticClass:"value"},[t._v(t._s(t.periodData.orderTotalPrice))])])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"item flex"},[a("div",{staticClass:"col-left small"},[a("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[a("a-icon",{attrs:{component:t.Icons.statistics.order}})],1)]),a("div",{staticClass:"col-right"},[a("p",{staticClass:"name"},[t._v("支付订单数 (笔)")]),a("p",{staticClass:"value"},[t._v(t._s(t.periodData.orderTotal))])])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"item flex"},[a("div",{staticClass:"col-left small"},[a("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[a("a-icon",{attrs:{component:t.Icons.statistics.goods}})],1)]),a("div",{staticClass:"col-right"},[a("p",{staticClass:"name"},[t._v("销售商品数量 (件)")]),a("p",{staticClass:"value"},[t._v(t._s(t.periodData.orderItemTotal))])])])])],1),a("a-row",{staticClass:"mt-20",attrs:{gutter:32}},[a("a-col",{attrs:{span:8}},[a("div",{staticClass:"item flex"},[a("div",{staticClass:"col-left"},[a("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[a("a-icon",{attrs:{component:t.Icons.statistics.user}})],1)]),a("div",{staticClass:"col-right"},[a("p",{staticClass:"name"},[t._v("会员数量")]),a("p",{staticClass:"value"},[t._v(t._s(t.statistics.userTotal))])])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"item flex"},[a("div",{staticClass:"col-left"},[a("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[a("a-icon",{attrs:{component:t.Icons.statistics.consume}})],1)]),a("div",{staticClass:"col-right"},[a("p",{staticClass:"name"},[t._v("消费人数")]),a("p",{staticClass:"value"},[t._v(t._s(t.periodData.consumeUserTotal))])])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"item flex"},[a("div",{staticClass:"col-left"},[a("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[a("a-icon",{attrs:{component:t.Icons.statistics.recharge}})],1)]),a("div",{staticClass:"col-right"},[a("p",{staticClass:"name"},[t._v("用户充值总额 (元)")]),a("p",{staticClass:"value"},[t._v(t._s(t.periodData.rechargeTotalMoney))])])])])],1)],1),a("a-card",{staticClass:"trade-trend mt-20",attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[a("span",[t._v("近七日交易走势")])]),a("div",{staticClass:"echarts-body"},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"main"}})])]),a("a-row",{staticClass:"ranking mt-20",attrs:{gutter:32}},[a("a-col",{staticClass:"ranking-item",attrs:{span:12}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[a("span",[t._v("商品销售榜")])]),a("a-table",{attrs:{rowKey:"id",columns:t.goodsRankingColumns,dataSource:t.goodsRanking,pagination:!1},scopedSlots:t._u([{key:"index",fn:function(e,s,i){return[i<3&&s.sold_count>0?a("div",{staticClass:"ranking-img"},[a("img",{attrs:{src:"static/img/statistics/ranking/0"+(i+1)+".png",alt:""}})]):a("span",[t._v(t._s(i+1))])]}},{key:"goods_name",fn:function(e){return[a("p",{staticClass:"oneline-hide",staticStyle:{width:"240px"}},[t._v(t._s(e))])]}}])})],1)],1),a("a-col",{staticClass:"ranking-item",attrs:{span:12}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[a("span",[t._v("用户消费榜")])]),a("a-table",{attrs:{rowKey:"id",columns:t.userRankingColumns,dataSource:t.userExpendRanking,pagination:!1},scopedSlots:t._u([{key:"index",fn:function(e,s,i){return[i<3&&s.cumulative_consumption>0?a("div",{staticClass:"ranking-img"},[a("img",{attrs:{src:"static/img/statistics/ranking/0"+(i+1)+".png",alt:""}})]):a("span",[t._v(t._s(i+1))])]}}])})],1)],1)],1)],1)])},r=[],n=(a("d3b7"),a("d81d"),a("313e")),c=a.n(n),o=(a("a59f"),a("b0de")),d=a("d084"),l=a("fab29"),u=a("193c"),p=a.n(u),f=a("ba7a"),m=a.n(f),v=a("19c2"),g=a.n(v),h=a("5ef6"),b=a.n(h),x=a("f4f6"),_=a.n(x),C=a("f08d"),y=a.n(C),D=a("8a6c"),k=a.n(D),w={sale:p.a,increase:m.a},j={goods:g.a,order:b.a,user:_.a,consume:y.a,recharge:k.a},I=a("ca00"),O=a("c1df"),T=a.n(O),S=a("2ef0"),Y=a.n(S),P=[{title:"排名",dataIndex:"index",align:"center",scopedSlots:{customRender:"index"}},{title:"商品名称",dataIndex:"title",scopedSlots:{customRender:"goods_name"}},{title:"销量 (件)",align:"center",dataIndex:"sold_count"},{title:"售价 (元)",align:"center",dataIndex:"price_lowest"}],M=[{title:"排名",dataIndex:"index",align:"center",scopedSlots:{customRender:"index"}},{title:"会员昵称",dataIndex:"nickname",scopedSlots:{customRender:"nickname"}},{title:"实际消费金额 (元)",align:"center",dataIndex:"cumulative_consumption"}],R={name:"Index",data:function(){return{Icons:s,isLoading:!1,statistics:{},periodData:{consumeUserTotal:0,orderTotal:0,orderItemTotal:0,orderTotalPrice:0,rechargeTotalMoney:0},goodsRanking:[],userExpendRanking:[],ordersDaily:[],dateValue:[],goodsRankingColumns:P,userRankingColumns:M}},created:function(){this.getData()},methods:{onPickerChange:function(){this.getPeriodData()},handleFastDate:function(t){this.dateValue=0===t?[]:[T()(Object(I["d"])(-t)),T()(Object(I["d"])(0))],this.getPeriodData()},getPeriodData:function(){var t=this;this.isLoading=!0;var e=this.dateValue,a=e.length?[e[0].format("YYYY-MM-DD"),e[1].format("YYYY-MM-DD")]:[T()().subtract(30,"d").format("YYYY-MM-DD"),T()().format("YYYY-MM-DD")];o["a"]({date_between:a}).then((function(e){t.ordersDaily=e.data,t.dateValue.length?(t.periodData.orderTotal=Y()(t.ordersDaily).sumBy("order_count"),t.periodData.orderItemTotal=Y()(t.ordersDaily).sumBy("order_item_count"),t.periodData.orderTotalPrice=Y()(t.ordersDaily).sumBy("turnover")):(t.periodData.orderTotal=t.statistics.orderTotal,t.periodData.orderItemTotal=t.statistics.orderItemTotal,t.periodData.orderTotalPrice=t.statistics.orderTotalPrice),t.$nextTick((function(){t.myEcharts()}))})).finally((function(){t.isLoading=!1}))},getData:function(){var t=this;this.isLoading=!0,o["c"]({store_id:this.$store.getters.storeId}).then((function(e){t.statistics=e,d["i"]({sort:"sold_count_desc",per_page:5}).then((function(e){t.goodsRanking=e.data})),l["c"]({account_sort:"cumulative_consumption_desc",per_page:5}).then((function(e){t.userExpendRanking=e.data})),t.getPeriodData()})).finally((function(){t.isLoading=!1}))},myEcharts:function(){this.data;var t=c.a.init(document.getElementById("main"),"fresh-cut"),e={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["成交额","毛利","成交量"]},xAxis:[{type:"category",data:Y()(this.ordersDaily).map("date").value(),axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"金额",axisLabel:{formatter:"¥{value}"}},{type:"value",name:"单量",axisLabel:{formatter:"{value} 单"}}],series:[{name:"成交额",type:"bar",tooltip:{valueFormatter:function(t){return t+" 元"}},data:Y()(this.ordersDaily).map("turnover").value()},{name:"毛利",type:"bar",tooltip:{valueFormatter:function(t){return t+" 元"}},data:Y()(this.ordersDaily).map("gross_profit").value()},{name:"成交量",type:"line",yAxisIndex:1,tooltip:{valueFormatter:function(t){return t+" 单"}},data:Y()(this.ordersDaily).map("order_count").value()}]};t.setOption(e)}}},L=R,V=(a("944be"),a("2877")),A=Object(V["a"])(L,i,r,!1,null,"0b981e0c",null);e["default"]=A.exports},"44d1":function(t,e,a){},"8a6c":function(t,e,a){var s=a("b2b7");t.exports={__esModule:!0,default:s.svgComponent({tag:"svg",attrsMap:{t:"1600598056712",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8246",width:"200",height:"200"},children:[{tag:"path",attrsMap:{d:"M829.797514 641.926675c19.058897 0 31.786147 12.72725 31.786147 31.786147v127.080633h127.080632c19.122853 0 31.786147 12.791206 31.786147 31.850103s-19.058897 31.786147-31.786147 31.786147l-127.080632-0.063956v127.144588c0 12.72725-19.058897 31.786147-31.786147 31.786147-19.058897 0-31.786147-12.72725-31.786147-31.786147v-127.144588h-127.144588c-19.058897 0-31.722191-12.663294-31.722191-31.722191 0-19.122853 12.663294-31.786147 31.722191-31.786147l127.144588-0.063956v-127.080633c0-19.058897 12.72725-31.786147 31.786147-31.786147zM512 0c279.67972 0 508.45044 228.834676 508.45044 508.45044 0 25.4545 0 50.845044-6.395603 82.631191 0 19.058897-18.994941 31.786147-38.053838 25.4545-19.058897 0-31.786147-19.058897-25.4545-38.18175 6.395603-25.390544 6.395603-44.449441 6.395603-69.903941A442.191993 442.191993 0 0 0 512 63.572294c-247.893573 0-444.942102 203.380176-444.942102 451.273749A442.191993 442.191993 0 0 0 512 959.72419c25.4545 0 57.176691 0 82.631191-6.395603 19.058897-6.331647 31.786147 6.395603 38.117794 25.4545 6.395603 19.058897-6.395603 31.786147-25.390544 38.18175H512C232.32028 1016.900881 3.54956 788.130161 3.54956 508.45044 3.54956 228.77072 232.32028 0 512 0z m92.416464 262.859284a30.059334 30.059334 0 0 1 39.908563-14.454063 30.059334 30.059334 0 0 1 14.454062 39.908563L574.67691 468.797702h131.173818a30.059334 30.059334 0 0 1 0 60.054712H542.059334v63.95603h92.416464c20.593842 0 37.478234 13.430766 37.478234 29.995378 0 16.4367-16.884392 29.931422-37.478234 29.931423H542.059334v94.974704a30.059334 30.059334 0 0 1-29.995378 29.931423 30.059334 30.059334 0 0 1-29.995378-29.931423v-94.974704H389.588158c-20.593842 0-37.478234-13.430766-37.478234-29.931423s16.884392-30.059334 37.478234-30.059334H481.940666v-63.95603H318.213228A30.059334 30.059334 0 0 1 288.153894 498.857036a30.059334 30.059334 0 0 1 29.995378-29.995378H449.32309L365.220911 288.441696a30.059334 30.059334 0 0 1 54.362625-25.390544L512 461.25089z","p-id":"8247"}}]})}},"944be":function(t,e,a){"use strict";a("44d1")},d084:function(t,e,a){"use strict";a.d(e,"i",(function(){return n})),a.d(e,"j",(function(){return c})),a.d(e,"e",(function(){return o})),a.d(e,"n",(function(){return d})),a.d(e,"a",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"d",(function(){return p})),a.d(e,"l",(function(){return f})),a.d(e,"k",(function(){return m})),a.d(e,"b",(function(){return v})),a.d(e,"m",(function(){return g})),a.d(e,"h",(function(){return h})),a.d(e,"g",(function(){return b})),a.d(e,"c",(function(){return x}));var s=a("5530"),i=(a("ac1f"),a("5319"),a("b775")),r={list:"/products",listByIds:"/products",detail:"/products/{id}",basic:"/goods/basic",add:"/products",edit:"/products/{id}",batchDelete:"/products/sku",state:"/goods/state",saveSpec:"/products/{id}/spec",saveSku:"/products/{id}/sku",copySku:"/products/copy_sku",schedulePrice:"/products/{id}/scheduled_price",editSchedulePrice:"/products/{id}/scheduled_price/{schedule_id}"};function n(t){return Object(i["b"])({url:r.list,method:"get",params:t})}function c(t,e){return Object(i["b"])({url:r.listByIds,method:"get",params:Object(s["a"])({ids:t,per_page:99},e)})}function o(t,e){return Object(i["b"])({url:r.detail.replace("{id}",t),method:"get",params:e})}function d(t){return Object(i["b"])({url:r.state,method:"post",data:t})}function l(t){return Object(i["b"])({url:r.add,method:"post",data:t})}function u(t,e){return Object(i["b"])({url:r.edit.replace("{id}",t),method:"patch",data:e})}function p(t){return Object(i["b"])({url:r.batchDelete,method:"delete",data:t})}function f(t,e){return Object(i["b"])({url:r.saveSpec.replace("{id}",t),method:"put",data:e})}function m(t,e){return Object(i["b"])({url:r.saveSku.replace("{id}",t),method:"put",data:e})}function v(t){return Object(i["b"])({url:r.copySku,method:"post",data:t})}function g(t,e){return Object(i["b"])({url:r.schedulePrice.replace("{id}",t),method:"post",data:e})}function h(t,e){return Object(i["b"])({url:r.schedulePrice.replace("{id}",t),method:"get",params:e})}function b(t,e,a){return Object(i["b"])({url:r.editSchedulePrice.replace("{id}",t).replace("{schedule_id}",e),method:"patch",params:a})}function x(t,e,a){return Object(i["b"])({url:r.editSchedulePrice.replace("{id}",t).replace("{schedule_id}",e),method:"delete",params:a})}},fab29:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return o}));a("ac1f"),a("5319");var s=a("b775"),i={list:"/users",detail:"/users/{id}",recharge:"/user/recharge",grade:"/user/grade",delete:"/user/delete"};function r(t){return Object(s["b"])({url:i.list,method:"get",params:t})}function n(t){return Object(s["b"])({url:i.recharge,method:"post",data:t})}function c(t){return Object(s["b"])({url:i.grade,method:"post",data:t})}function o(t){return Object(s["b"])({url:i.delete,method:"post",data:t})}}}]);
(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[806],{30293:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return P}});var t=function(){var e=this,a=e._self._c;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("a-row",{staticClass:"row-item-search"},[a("a-form",{staticClass:"search-form",attrs:{form:e.searchForm,layout:"inline"},on:{submit:e.handleSearch}},[a("a-form-item",{attrs:{label:"昵称/手机号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["search"],expression:"['search']"}],attrs:{placeholder:"请输入昵称/手机号"}})],1),a("a-form-item",{attrs:{label:"会员等级"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["gradeId",{initialValue:0}],expression:"['gradeId', { initialValue: 0 }]"}]},[a("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._l(e.gradeList,(function(r,t){return a("a-select-option",{key:t,attrs:{value:r.grade_id}},[e._v(e._s(r.name))])}))],2)],1),a("a-form-item",{attrs:{label:"注册时间"}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime"],expression:"['betweenTime']"}],attrs:{format:"YYYY-MM-DD"}})],1),a("a-form-item",{staticClass:"search-btn"},[a("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("搜索")])],1)],1)],1)],1),a("s-table",{ref:"table",attrs:{rowKey:"id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"avatar_url",fn:function(e){return a("span",{},[a("div",{staticClass:"avatar"},[a("img",e?{attrs:{width:"45",height:"45",src:e,alt:"用户头像"}}:{attrs:{width:"45",height:"45",src:r(51915),alt:"用户头像"}})])])}},{key:"main_info",fn:function(r){return a("span",{},[a("p",[e._v(e._s(r.nickname))]),a("p",{staticClass:"c-p"},[e._v(e._s(r.phone))])])}},{key:"grade",fn:function(r){return a("span",{},[r?a("a-tag",[e._v(e._s(r.name))]):a("span",[e._v("--")])],1)}},{key:"balance",fn:function(r,t){return a("span",{},[a("p",[a("span",[e._v("余额：")]),a("span",{staticClass:"c-p"},[e._v(e._s(r))])]),a("p",[a("span",[e._v("积分：")]),a("span",{staticClass:"c-p"},[e._v(e._s(t.points))])])])}},{key:"expend_money",fn:function(r){return a("span",{},[a("span",{staticClass:"c-p"},[e._v(e._s(r))])])}},{key:"platform",fn:function(r){return a("span",{staticClass:"platform"},[e.PlatformIcons[r]?a("p",[a("a-tooltip",[a("template",{slot:"title"},[e._v(e._s(e.PlatformName[r]))]),a("a-icon",{staticClass:"icon",class:[r],attrs:{component:e.PlatformIcons[r]}})],2)],1):e._e()])}},{key:"action",fn:function(r){return a("span",{staticClass:"actions"},[a("a",{directives:[{name:"action",rawName:"v-action:recharge",arg:"recharge"}],attrs:{title:"会员充值"},on:{click:function(a){return e.handleRecharge(r)}}},[e._v("充值")]),a("a",{directives:[{name:"action",rawName:"v-action:grade",arg:"grade"}],attrs:{title:"会员等级"},on:{click:function(a){return e.handleGrade(r)}}},[e._v("等级")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(a){return e.handleDelete(r)}}},[e._v("删除")])])}}])}),a("GradeForm",{ref:"GradeForm",attrs:{gradeList:e.gradeList},on:{handleSubmit:e.handleRefresh}}),a("RechargeForm",{ref:"RechargeForm",on:{handleSubmit:e.handleRefresh}})],1)},n=[],i=r(57888),o=r(17498),l=r(71009),s=r(11570),u=function(){var e=this,a=e._self._c;return a("a-modal",{staticClass:"noborder",attrs:{title:e.title,width:520,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"会员ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.record.user_id))])]),a("a-form-item",{attrs:{label:"会员等级",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["grade_id",{rules:[{required:!0}]}],expression:"['grade_id', { rules: [{ required: true }] }]"}],attrs:{placeholder:"请选择会员等级"}},[a("a-select-option",{attrs:{value:0}},[e._v("无等级")]),e._l(e.gradeList,(function(r,t){return a("a-select-option",{key:t,attrs:{value:r.grade_id}},[e._v(e._s(r.name))])}))],2)],1),a("a-form-item",{attrs:{label:"管理员备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{required:!0,message:"请输入管理员备注"}]}],expression:"['remark', { rules: [{ required: true, message: '请输入管理员备注' }] }]"}],attrs:{placeholder:"请输入管理员备注",rows:3}})],1)],1)],1)],1)},c=[],d=r(91863),m=r.n(d),p={components:{},props:{gradeList:{type:Array,required:!0}},data:function(){return{title:"设置会员等级",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),record:{}}},methods:{handle:function(e){this.visible=!0,this.record=e,this.setFieldsValue()},setFieldsValue:function(){var e=this.record,a=this.form.setFieldsValue;this.$nextTick((function(){a(m()(e,["grade_id"]))}))},handleSubmit:function(e){var a=this;e.preventDefault();var r=this.form.validateFields;r((function(e,r){!e&&a.onFormSubmit(r)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var a=this;this.confirmLoading=!0,o.on({userId:this.record.user_id,form:e}).then((function(r){a.$message.success(r.message,1.5),a.handleCancel(),a.$emit("handleSubmit",e)})).finally((function(){a.confirmLoading=!1}))}}},f=p,h=r(81656),v=(0,h.A)(f,u,c,!1,null,null,null),b=v.exports,C=function(){var e=this,a=e._self._c;return a("a-modal",{staticClass:"noborder",attrs:{title:e.title,width:520,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.onChangeTabs}},[a("a-tab-pane",{key:e.RECHARGE_TYPE_BALANCE,attrs:{tab:"充值余额"}},[e.activeKey===e.RECHARGE_TYPE_BALANCE?[a("a-form-item",{staticClass:"mb-5",attrs:{label:"会员ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.record.user_id))])]),a("a-form-item",{staticClass:"mb-5",attrs:{label:"当前余额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"c-p"},[e._v(e._s(e.record.balance))])]),a("a-form-item",{attrs:{label:"充值方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["".concat(e.RECHARGE_TYPE_BALANCE,".mode"),{initialValue:"inc",rules:[{required:!0}]}],expression:"[`${RECHARGE_TYPE_BALANCE}.mode`, { initialValue: 'inc', rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:"inc"}},[e._v("增加")]),a("a-radio",{attrs:{value:"dec"}},[e._v("减少")]),a("a-radio",{attrs:{value:"final"}},[e._v("最终金额")])],1)],1),a("a-form-item",{attrs:{label:"变更金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["".concat(e.RECHARGE_TYPE_BALANCE,".money"),{initialValue:"",rules:[{required:!0,message:"请输入变更的金额"}]}],expression:"[`${RECHARGE_TYPE_BALANCE}.money`, { initialValue: '', rules: [{ required: true, message: '请输入变更的金额' }] }]"}],attrs:{min:.01}})],1),a("a-form-item",{attrs:{label:"管理员备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["".concat(e.RECHARGE_TYPE_BALANCE,".remark"),{rules:[{required:!0,message:"请输入管理员备注"}]}],expression:"[`${RECHARGE_TYPE_BALANCE}.remark`, { rules: [{ required: true, message: '请输入管理员备注' }] }]"}],attrs:{placeholder:"请输入管理员备注",rows:3}})],1)]:e._e()],2),a("a-tab-pane",{key:e.RECHARGE_TYPE_POINTS,attrs:{tab:"充值积分"}},[e.activeKey===e.RECHARGE_TYPE_POINTS?[a("a-form-item",{staticClass:"mb-5",attrs:{label:"会员ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v(e._s(e.record.user_id))])]),a("a-form-item",{staticClass:"mb-5",attrs:{label:"当前积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",{staticClass:"c-p"},[e._v(e._s(e.record.points))])]),a("a-form-item",{attrs:{label:"充值方式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["".concat(e.RECHARGE_TYPE_POINTS,".mode"),{initialValue:"inc",rules:[{required:!0}]}],expression:"[`${RECHARGE_TYPE_POINTS}.mode`, { initialValue: 'inc', rules: [{ required: true }] }]"}]},[a("a-radio",{attrs:{value:"inc"}},[e._v("增加")]),a("a-radio",{attrs:{value:"dec"}},[e._v("减少")]),a("a-radio",{attrs:{value:"final"}},[e._v("最终积分")])],1)],1),a("a-form-item",{attrs:{label:"变更数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["".concat(e.RECHARGE_TYPE_POINTS,".value"),{initialValue:"",rules:[{required:!0,message:"请输入变更的金数量"}]}],expression:"[`${RECHARGE_TYPE_POINTS}.value`, { initialValue: '', rules: [{ required: true, message: '请输入变更的金数量' }] }]"}],attrs:{min:.01}})],1),a("a-form-item",{attrs:{label:"管理员备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["".concat(e.RECHARGE_TYPE_POINTS,".remark"),{rules:[{required:!0,message:"请输入管理员备注"}]}],expression:"[`${RECHARGE_TYPE_POINTS}.remark`, { rules: [{ required: true, message: '请输入管理员备注' }] }]"}],attrs:{placeholder:"请输入管理员备注",rows:3}})],1)]:e._e()],2)],1)],1)],1)],1)},g=[],_="balance",w="points",y={components:{},data:function(){return{title:"会员充值",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),activeKey:_,RECHARGE_TYPE_BALANCE:_,RECHARGE_TYPE_POINTS:w,record:{}}},methods:{handle:function(e){this.visible=!0,this.record=e},onChangeTabs:function(e){this.activeKey=e},handleSubmit:function(e){var a=this;e.preventDefault();var r=this.form.validateFields;r((function(e,r){!e&&a.onFormSubmit(r)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var a=this,r=this.record,t=this.activeKey;this.confirmLoading=!0,o.Q3({userId:r.user_id,target:t,form:e}).then((function(r){a.$message.success(r.message,1.5),a.handleCancel(),a.$emit("handleSubmit",e)})).finally((function(){a.confirmLoading=!1}))}}},x=y,E=(0,h.A)(x,C,g,!1,null,"eba90c32",null),A=E.exports,R=r(69781),N={"MP-WEIXIN":"微信小程序",H5:"H5",APP:"APP"},S={"MP-WEIXIN":R.sE,H5:R.h5,APP:R.yA},q={name:"Index",components:{STable:s.Wd,GradeForm:b,RechargeForm:A},data:function(){var e=this;return{PlatformName:N,PlatformIcons:S,searchForm:this.$form.createForm(this),queryParam:{},isLoading:!1,columns:[{title:"会员ID",dataIndex:"id"},{title:"会员头像",dataIndex:"avatar_url",scopedSlots:{customRender:"avatar_url"}},{title:"昵称/手机号",scopedSlots:{customRender:"main_info"}},{title:"余额/积分",dataIndex:"balance",scopedSlots:{customRender:"balance"}},{title:"实际消费金额",dataIndex:"expend_money",scopedSlots:{customRender:"expend_money"}},{title:"注册来源",dataIndex:"platform",scopedSlots:{customRender:"platform"}},{title:"注册时间",dataIndex:"created_at"},{title:"操作",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(a){return o.p_((0,i.A)((0,i.A)({with_account:!0},a),e.queryParam)).then((function(e){return e}))},gradeList:[]}},created:function(){},methods:{getGradeList:function(){var e=this;l.Q7().then((function(a){e.gradeList=a.data.list}))},handleGrade:function(e){this.$refs.GradeForm.handle(e)},handleRecharge:function(e){this.$refs.RechargeForm.handle(e)},handleDelete:function(e){var a=this,r=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return o.KF({userId:e.id}).then((function(e){a.$message.success(e.message,1.5),a.handleRefresh()})).finally((function(e){r.destroy()}))}})},handleSearch:function(e){var a=this;e.preventDefault(),this.searchForm.validateFields((function(e,r){e||(a.queryParam=(0,i.A)((0,i.A)({},a.queryParam),r),a.handleRefresh(!0))}))},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)}}},F=q,I=(0,h.A)(F,t,n,!1,null,"4174e087",null),P=I.exports},83917:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return F}});for(var t=function(){var e=this,a=e._self._c;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),a("div",{staticClass:"table-operator"},[a("a-button",{directives:[{name:"action",rawName:"v-action:create",arg:"create"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("s-table",{ref:"table",attrs:{rowKey:"grade_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"upgrade",fn:function(r){return a("span",{},[e._v("消费满"+e._s(r.expend_money)+"元")])}},{key:"equity",fn:function(r){return a("span",{},[e._v(e._s(r.discount)+"折")])}},{key:"status",fn:function(r){return a("span",{},[a("a-tag",{attrs:{color:r?"green":""}},[e._v(e._s(r?"启用":"禁用"))])],1)}},{key:"action",fn:function(r,t){return a("span",{},[a("a",{directives:[{name:"action",rawName:"v-action:update",arg:"update"}],staticStyle:{"margin-right":"8px"},on:{click:function(a){return e.handleEdit(t)}}},[e._v("编辑")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")])])}}])}),a("AddForm",{ref:"AddForm",on:{handleSubmit:e.handleRefresh}}),a("EditForm",{ref:"EditForm",on:{handleSubmit:e.handleRefresh}})],1)},n=[],i=r(57888),o=r(71009),l=r(11570),s=function(){var e=this,a=e._self._c;return a("a-modal",{attrs:{title:e.title,width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"等级名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"例如：大众会员、黄金会员、铂金会员、钻石会员"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入等级名称"}]}],expression:"['name', {rules: [{required: true, message: '请输入等级名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"等级权重",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"会员等级的权重，数字越大 等级越高"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight",{rules:[{required:!0,message:"请选择等级权重"}]}],expression:"['weight', {rules: [{required: true, message: '请选择等级权重'}]}]"}]},e._l(e.weights,(function(r,t){return a("a-select-option",{key:t,attrs:{value:r}},[e._v(e._s(r))])})),1)],1),a("a-form-item",{attrs:{label:"升级条件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["upgrade.expend_money",{rules:[{required:!0,message:"升级条件不能为空"}]}],expression:"['upgrade.expend_money', { rules: [{ required: true, message: '升级条件不能为空' }] }]"}],attrs:{addonBefore:"实际消费金额满",addonAfter:"元",inputProps:{min:.01}}}),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("用户的实际消费金额满足后，自动升级")])])],1),a("a-form-item",{attrs:{label:"等级权益",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["equity.discount",{rules:[{required:!0,message:"等级权益不能为空"}]}],expression:"['equity.discount', { rules: [{ required: true, message: '等级权益不能为空' }] }]"}],attrs:{addonBefore:"折扣率",addonAfter:"折",inputProps:{min:0,max:9.9}}}),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("折扣率范围0.0-9.9，例如: 9.8代表98折，0代表不折扣")])])],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', {initialValue: 1, rules: [{required: true}]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("启用")]),a("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1),a("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},u=[],c=[],d=1;d<=20;d++)c.push(d);for(var m={components:{InputNumberGroup:l.tE},data:function(){return{title:"新增会员等级",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),weights:c}},created:function(){},methods:{add:function(){this.visible=!0},handleSubmit:function(e){var a=this;e.preventDefault();var r=this.form.validateFields;r((function(e,r){!e&&a.onFormSubmit(r)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var a=this;this.confirmLoading=!0,o.WQ({form:e}).then((function(r){a.$message.success(r.message,1.5),a.handleCancel(),a.$emit("handleSubmit",e)})).finally((function(){a.confirmLoading=!1}))}}},p=m,f=r(81656),h=(0,f.A)(p,s,u,!1,null,null,null),v=h.exports,b=function(){var e=this,a=e._self._c;return a("a-modal",{attrs:{title:e.title,width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"等级名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"例如：大众会员、黄金会员、铂金会员、钻石会员"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入等级名称"}]}],expression:"['name', {rules: [{required: true, message: '请输入等级名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"等级权重",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"会员等级的权重，数字越大 等级越高"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight",{rules:[{required:!0,message:"请选择等级权重"}]}],expression:"['weight', {rules: [{required: true, message: '请选择等级权重'}]}]"}]},e._l(e.weights,(function(r,t){return a("a-select-option",{key:t,attrs:{value:r}},[e._v(e._s(r))])})),1)],1),a("a-form-item",{attrs:{label:"升级条件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["upgrade.expend_money",{rules:[{required:!0,message:"升级条件不能为空"}]}],expression:"['upgrade.expend_money', { rules: [{ required: true, message: '升级条件不能为空' }] }]"}],attrs:{addonBefore:"实际消费金额满",addonAfter:"元",inputProps:{min:.01}}}),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("用户的实际消费金额满足后，自动升级")])])],1),a("a-form-item",{attrs:{label:"等级权益",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["equity.discount",{rules:[{required:!0,message:"等级权益不能为空"}]}],expression:"['equity.discount', { rules: [{ required: true, message: '等级权益不能为空' }] }]"}],attrs:{addonBefore:"折扣率",addonAfter:"折",inputProps:{min:0,max:9.9}}}),a("div",{staticClass:"form-item-help"},[a("p",{staticClass:"extra"},[e._v("折扣率范围0.0-9.9，例如: 9.8代表98折，0代表不折扣")])])],1),a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', {initialValue: 1, rules: [{required: true}]}]"}]},[a("a-radio",{attrs:{value:1}},[e._v("启用")]),a("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1),a("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},C=[],g=r(91863),_=r.n(g),w=[],y=1;y<=20;y++)w.push(y);var x={components:{InputNumberGroup:l.tE},data:function(){return{title:"编辑会员等级",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),weights:w,record:{}}},created:function(){},methods:{edit:function(e){this.visible=!0,this.record=e,this.setFieldsValue()},setFieldsValue:function(){var e=this.record,a=this.form.setFieldsValue;e.cascader=[e.province_id,e.city_id,e.region_id],this.$nextTick((function(){a(_()(e,["name","weight","upgrade","equity","status","sort"]))}))},handleSubmit:function(e){var a=this;e.preventDefault();var r=this.form.validateFields;r((function(e,r){!e&&a.onFormSubmit(r)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var a=this;this.confirmLoading=!0,o.hc({gradeId:this.record.grade_id,form:e}).then((function(r){a.$message.success(r.message,1.5),a.handleCancel(),a.$emit("handleSubmit",e)})).finally((function(){a.confirmLoading=!1}))}}},E=x,A=(0,f.A)(E,b,C,!1,null,null,null),R=A.exports,N={name:"Index",components:{STable:l.Wd,AddForm:v,EditForm:R},data:function(){var e=this;return{queryParam:{},isLoading:!1,columns:[{title:"等级ID",dataIndex:"grade_id"},{title:"等级名称",dataIndex:"name"},{title:"等级权重",dataIndex:"weight"},{title:"升级条件",dataIndex:"upgrade",scopedSlots:{customRender:"upgrade"}},{title:"等级权益",dataIndex:"equity",scopedSlots:{customRender:"equity"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(a){return o.p_((0,i.A)((0,i.A)({},a),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleAdd:function(){this.$refs.AddForm.add()},handleEdit:function(e){this.$refs.EditForm.edit(e)},handleDelete:function(e){var a=this,r=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return o.KF({gradeId:e.grade_id}).then((function(e){a.$message.success(e.message,1.5),a.handleRefresh()})).finally((function(e){r.destroy()}))}})},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)}}},S=N,q=(0,f.A)(S,t,n,!1,null,null,null),F=q.exports},71009:function(e,a,r){"use strict";r.d(a,{KF:function(){return u},Q7:function(){return o},WQ:function(){return l},hc:function(){return s},p_:function(){return i}});var t=r(26222),n={list:"/user.grade/list",all:"/user.grade/all",add:"/user.grade/add",edit:"/user.grade/edit",delete:"/user.grade/delete"};function i(e){return(0,t.p)({url:n.list,method:"get",params:e})}function o(e){return(0,t.p)({url:n.all,method:"get",params:e})}function l(e){return(0,t.p)({url:n.add,method:"post",data:e})}function s(e){return(0,t.p)({url:n.edit,method:"post",data:e})}function u(e){return(0,t.p)({url:n.delete,method:"post",data:e})}},17498:function(e,a,r){"use strict";r.d(a,{KF:function(){return s},Q3:function(){return o},on:function(){return l},p_:function(){return i}});var t=r(26222),n={list:"/users",detail:"/users/{id}",recharge:"/user/recharge",grade:"/user/grade",delete:"/user/delete"};function i(e){return(0,t.p)({url:n.list,method:"get",params:e})}function o(e){return(0,t.p)({url:n.recharge,method:"post",data:e})}function l(e){return(0,t.p)({url:n.grade,method:"post",data:e})}function s(e){return(0,t.p)({url:n.delete,method:"post",data:e})}},91863:function(e,a,r){var t=1/0,n=9007199254740991,i="[object Arguments]",o="[object Function]",l="[object GeneratorFunction]",s="[object Symbol]",u="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=u||c||Function("return this")();function m(e,a,r){switch(r.length){case 0:return e.call(a);case 1:return e.call(a,r[0]);case 2:return e.call(a,r[0],r[1]);case 3:return e.call(a,r[0],r[1],r[2])}return e.apply(a,r)}function p(e,a){var r=-1,t=e?e.length:0,n=Array(t);while(++r<t)n[r]=a(e[r],r,e);return n}function f(e,a){var r=-1,t=a.length,n=e.length;while(++r<t)e[n+r]=a[r];return e}var h=Object.prototype,v=h.hasOwnProperty,b=h.toString,C=d.Symbol,g=h.propertyIsEnumerable,_=C?C.isConcatSpreadable:void 0,w=Math.max;function y(e,a,r,t,n){var i=-1,o=e.length;r||(r=R),n||(n=[]);while(++i<o){var l=e[i];a>0&&r(l)?a>1?y(l,a-1,r,t,n):f(n,l):t||(n[n.length]=l)}return n}function x(e,a){return e=Object(e),E(e,a,(function(a,r){return r in e}))}function E(e,a,r){var t=-1,n=a.length,i={};while(++t<n){var o=a[t],l=e[o];r(l,o)&&(i[o]=l)}return i}function A(e,a){return a=w(void 0===a?e.length-1:a,0),function(){var r=arguments,t=-1,n=w(r.length-a,0),i=Array(n);while(++t<n)i[t]=r[a+t];t=-1;var o=Array(a+1);while(++t<a)o[t]=r[t];return o[a]=i,m(e,this,o)}}function R(e){return q(e)||S(e)||!!(_&&e&&e[_])}function N(e){if("string"==typeof e||$(e))return e;var a=e+"";return"0"==a&&1/e==-t?"-0":a}function S(e){return I(e)&&v.call(e,"callee")&&(!g.call(e,"callee")||b.call(e)==i)}var q=Array.isArray;function F(e){return null!=e&&k(e.length)&&!P(e)}function I(e){return T(e)&&F(e)}function P(e){var a=L(e)?b.call(e):"";return a==o||a==l}function k(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function L(e){var a=typeof e;return!!e&&("object"==a||"function"==a)}function T(e){return!!e&&"object"==typeof e}function $(e){return"symbol"==typeof e||T(e)&&b.call(e)==s}var G=A((function(e,a){return null==e?{}:x(e,p(y(a,1),N))}));e.exports=G}}]);
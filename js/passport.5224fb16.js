(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["passport"],{"112a":function(t,e,r){},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("d3b7");function n(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(l){return void r(l)}s.done?e(c):Promise.resolve(c).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,c,"next",t)}function c(t){n(a,i,o,s,c,"throw",t)}s(void 0)}))}}},"9b19":function(t,e,r){t.exports=r.p+"assets/logo.a3adccf1.svg"},cc51:function(t,e,r){"use strict";r("112a")},cedc:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[t._m(0),r("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",form:t.form},on:{submit:t.handleSubmit}},[t.isLoginError?r("a-alert",{attrs:{type:"error",showIcon:"",message:t.loginErrorMsg}}):t._e(),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"您还没有输入用户名"}],validateTrigger:"change"}],expression:"[\n          'username',\n          {rules: [{ required: true, message: '您还没有输入用户名' }], validateTrigger: 'change'}\n        ]"}],staticClass:"login-input",attrs:{size:"large",type:"text",placeholder:"请输入用户名"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"您还没有输入用户密码"}],validateTrigger:"blur"}],expression:"[\n          'password',\n          {rules: [{ required: true, message: '您还没有输入用户密码' }], validateTrigger: 'blur'}\n        ]"}],staticClass:"login-input",attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"请输入用户密码"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",{staticStyle:{"margin-top":"24px"}},[r("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:t.state.loginBtn,disabled:t.state.loginBtn}},[t._v("登陆")])],1)],1),t.userAgent.includes("Mobile")||t.userAgent.includes("wxwork")||t.userAgent.includes("MicroMessenger")?r("a-button",{staticClass:"login-button",attrs:{loading:t.isLocating,size:"large"},on:{click:t.toWeworkAuth}},[r("a-avatar",{staticStyle:{margin:"0 10px"},attrs:{shape:"square",size:"small",src:"static/img/icon/wework.png"}}),t._v("企业微信登录")],1):r("a-popover",{on:{visibleChange:t.generateWeworkQRcode}},[r("a-button",{staticClass:"login-button",attrs:{size:"large"}},[r("a-avatar",{staticStyle:{margin:"0 10px"},attrs:{shape:"square",size:"small",src:"static/img/icon/wework.png"}}),t._v("企业微信登录")],1),r("template",{slot:"content"},[r("div",{attrs:{id:"wework-qrcode"}},[t._v("Loading")])])],2)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"logo"},[n("img",{staticClass:"logo",attrs:{src:r("9b19"),alt:"logo"}})]),n("p",{staticClass:"title"},[t._v("商城系统登录")])])}],o=r("1da1"),a=r("5530"),s=(r("96cf"),r("d3b7"),r("5880")),c=r("ca00"),l=(r("7ded"),{data:function(){return{isLoginError:!1,loginErrorMsg:"登录失败",form:this.$form.createForm(this),state:{loginBtn:!1},userAgent:window.navigator.userAgent,isLocating:!1,WEWORK_CORPID:"wwab032cc648e1816d",WEWORK_AGENTID:"1000008"}},created:function(){var t=document.createElement("script");t.type="text/javascript",t.src="http://wwcdn.weixin.qq.com/node/wework/wwopen/js/wwLogin-1.2.7.js",document.body.appendChild(t),this.loginWework()},methods:Object(a["a"])(Object(a["a"])({},Object(s["mapActions"])(["Login","LoginWework"])),{},{handleSubmit:function(t){var e=this;t.preventDefault();var r=this.form.validateFields,n=this.state,i=this.Login;n.loginBtn=!0,r(["username","password"],{force:!0},(function(t,r){if(t)setTimeout((function(){n.loginBtn=!1}),100);else{var o=Object(a["a"])({},r);i(o).then((function(t){return e.loginSuccess(t)})).catch((function(t){return e.loginFailed(t)})).finally((function(){n.loginBtn=!1}))}}))},loginSuccess:function(t){var e=this;this.isLoginError=!1,this.$message.success("登录成功！",1.5),setTimeout((function(){e.$router.push({path:"/"}),e.$notification.success({message:"欢迎",description:"".concat(Object(c["h"])(),"，欢迎回来")})}),1e3)},loginFailed:function(t){this.isLoginError=!0,this.loginErrorMsg=t.msg},toWeworkAuth:function(){this.isLocating=!0,location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.WEWORK_CORPID+"&redirect_uri="+encodeURIComponent(location.href)+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect"},generateWeworkQRcode:function(){var t=this;this.$nextTick((function(){new WwLogin({id:"wework-qrcode",appid:t.WEWORK_CORPID,agentid:t.WEWORK_AGENTID,redirect_uri:encodeURIComponent(location.href),state:"",href:"",lang:"zh"})}))},loginWework:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.$route.query.code,r&&t.LoginWework({code:r}).then((function(e){return t.loginSuccess(e)})).catch((function(e){return t.loginFailed(e)})).finally((function(){state.loginBtn=!1}));case 2:case"end":return e.stop()}}),e)})))()}})}),u=l,g=(r("cc51"),r("2877")),d=Object(g["a"])(u,n,i,!1,null,"8c0bf222",null);e["default"]=d.exports}}]);
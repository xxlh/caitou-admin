(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["market"],{"0b50":function(e,a,t){"use strict";t("f076")},"0b60":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"优惠券名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['name', { rules: [{ required: true, min: 2, message: '请输入至少2个字符' }] }]"}],attrs:{placeholder:"请输入优惠券名称"}})],1),t("a-form-item",{attrs:{label:"优惠券类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["coupon_type",{initialValue:10,rules:[{required:!0}]}],expression:"['coupon_type', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("满减券")]),t("a-radio",{attrs:{value:20}},[e._v("折扣券")])],1)],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.getFieldValue("coupon_type")==e.CouponTypeEnum.FULL_DISCOUNT.value,expression:"form.getFieldValue('coupon_type') == CouponTypeEnum.FULL_DISCOUNT.value"}],attrs:{label:"减免金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["reduce_price",{rules:[{required:!0,message:"请输入减免金额"}]}],expression:"['reduce_price', { rules: [{ required: true, message: '请输入减免金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-5"},[e._v("元")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.getFieldValue("coupon_type")==e.CouponTypeEnum.DISCOUNT.value,expression:"form.getFieldValue('coupon_type') == CouponTypeEnum.DISCOUNT.value"}],attrs:{label:"折扣率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{initialValue:9.9,rules:[{required:!0,message:"请输入折扣率"}]}],expression:"['discount', { initialValue: 9.9, rules: [{ required: true, message: '请输入折扣率' }] }]"}],attrs:{min:0,max:9.9,precision:1}}),t("span",{staticClass:"ml-5"},[e._v("%")]),t("p",{staticClass:"form-item-help"},[t("small",[e._v("折扣率范围 0-9.9，8代表打8折，0代表不折扣")])])],1),t("a-form-item",{attrs:{label:"最低消费金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_price",{rules:[{required:!0,message:"请输入最低消费金额"}]}],expression:"['min_price', { rules: [{ required: true, message: '请输入最低消费金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-5"},[e._v("元")])],1),t("a-form-item",{attrs:{label:"到期类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_type",{initialValue:10,rules:[{required:!0}]}],expression:"['expire_type', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("领取后生效")]),t("a-radio",{attrs:{value:20}},[e._v("固定时间")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("expire_type"),expression:"form.getFieldValue('expire_type') == 10"}],staticClass:"expire_type-10"},[t("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_day",{initialValue:7,rules:[{required:!0,message:"请输入有效期天数"}]}],expression:"['expire_day', { initialValue: 7, rules: [{ required: true, message: '请输入有效期天数' }] }]"}],attrs:{addonBefore:"有效期",addonAfter:"天",inputProps:{min:1,precision:0}}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("expire_type"),expression:"form.getFieldValue('expire_type') == 20"}],staticClass:"expire_type-20"},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime",{initialValue:e.defaultDate,rules:[{required:!0,message:"请选择有效期范围"}]}],expression:"['betweenTime', { initialValue: defaultDate, rules: [{ required: true, message: '请选择有效期范围' }] }]"}],attrs:{format:"YYYY-MM-DD"}})],1)],1),t("a-form-item",{attrs:{label:"券适用范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range",{initialValue:10,rules:[{required:!0}]}],expression:"['apply_range', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("全场通用")]),t("a-radio",{attrs:{value:20}},[e._v("指定商品")])],1),20==e.form.getFieldValue("apply_range")?t("a-form-item",[t("SelectGoods",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range_config.applyGoodsIds",{rules:[{required:!0,message:"请选择指定的商品"}]}],expression:"['apply_range_config.applyGoodsIds', { rules: [{ required: true, message: '请选择指定的商品' }] }]"}],attrs:{defaultList:e.containGoodsList}})],1):e._e()],1),t("a-form-item",{attrs:{label:"发放总数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["total_num",{initialValue:-1,rules:[{required:!0,message:"请输入发放总数量"}]}],expression:"['total_num', { initialValue: -1, rules: [{ required: true, message: '请输入发放总数量' }] }]"}],attrs:{min:-1,precision:0}}),t("span",{staticClass:"ml-5"},[e._v("张")]),t("p",{staticClass:"form-item-help"},[t("small",[e._v("发放的优惠券总数量，-1为不限制")])])],1),t("a-form-item",{attrs:{label:"显示状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', { initialValue: 1, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("显示")]),t("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1),t("p",{staticClass:"form-item-help"},[t("small",[e._v("如果设为隐藏将不会展示在用户端页面")])])],1),t("a-form-item",{attrs:{label:"优惠券描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"['describe']"}],attrs:{autoSize:{minRows:4}}})],1),t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules:[{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1),t("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],s=t("1da1"),n=(t("d3b7"),t("96cf"),t("c1df")),o=t.n(n),l=t("2ef0"),u=t("39ad9"),c=t("d084"),d=t("ca00"),m=t("2af9"),p=t("8fa3"),f={components:{SelectGoods:m["d"],InputNumberGroup:m["b"]},data:function(){return{ApplyRangeEnum:p["a"],CouponTypeEnum:p["b"],ExpireTypeEnum:p["c"],isLoading:!1,isBtnLoading:!1,labelCol:{span:3},wrapperCol:{span:10},form:this.$form.createForm(this),defaultDate:[o()(),o()()],couponId:null,record:{},containGoodsList:[]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.couponId=e.$route.query.couponId,a.next=3,e.getDetail();case 3:return a.next=5,e.getContainGoodsList();case 5:case"end":return a.stop()}}),a)})))()},methods:{getDetail:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.couponId,e.isLoading=!0,a.next=4,u["c"]({couponId:t}).then((function(a){e.record=a.data.detail,e.setFieldsValue()})).finally((function(){e.isLoading=!1}));case 4:case"end":return a.stop()}}),a)})))()},getContainGoodsList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.record,r=Object(l["get"])(t,"apply_range_config.applyGoodsIds"),void 0===r||!r.length){a.next=6;break}return e.isLoading=!0,a.next=6,c["f"](r).then((function(a){e.containGoodsList=a.data.list})).finally((function(a){e.isLoading=!1}));case 6:case"end":return a.stop()}}),a)})))()},setFieldsValue:function(){var e=this,a=this.record,t=this.form,r=this.$nextTick;!Object(d["f"])(t.getFieldsValue())&&r((function(){var r=Object(l["pick"])(a,["name","coupon_type","reduce_price","discount","min_price","status","expire_type","expire_day","apply_range","total_num","describe","sort"]);r.betweenTime=e.getBetweenTime(a),t.setFieldsValue(r)}))},getBetweenTime:function(e){return e.expire_type===p["c"].FIXED_TIME.value?[o()(new Date(e.start_time)),o()(new Date(e.end_time))]:this.defaultDate},handleSubmit:function(e){e.preventDefault();var a=this.form.validateFields,t=this.onFormSubmit;a((function(e,a){!e&&t(a)}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,this.isBtnLoading=!0,u["d"]({couponId:this.couponId,form:e}).then((function(e){a.$message.success(e.message,1.5),setTimeout((function(){a.$router.push("./index")}),1500)})).catch((function(){a.isBtnLoading=!1})).finally((function(e){a.isLoading=!1}))}}},v=f,b=(t("6767"),t("2877")),_=Object(b["a"])(v,r,i,!1,null,"57c9acb2",null);a["default"]=_.exports},"0e9c":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"是否开启满额包邮",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_open",{rules:[{required:!0}]}],expression:"['is_open', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("开启")]),t("a-radio",{attrs:{value:0}},[e._v("关闭")])],1)],1),t("a-form-item",{attrs:{label:"单笔订单满",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["money",{rules:[{required:!0,message:"请输入包邮的订单额度"}]}],expression:"['money', { rules: [{ required: true, message: '请输入包邮的订单额度' }] }]"}],attrs:{min:0,precision:2}}),t("span",{staticClass:"ml-10"},[e._v("元包邮")]),t("div",{staticClass:"form-item-help"},[t("small",[e._v("如设置0为全场包邮")])])],1),t("a-form-item",{attrs:{label:"不参与包邮的商品",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("SelectGoods",{directives:[{name:"decorator",rawName:"v-decorator",value:["excludedGoodsIds"],expression:"['excludedGoodsIds']"}],attrs:{defaultList:e.excludedGoodsList}})],1),t("a-form-item",{attrs:{label:"不参与包邮的地区",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-button",{on:{click:e.handleAreasModal}},[e._v("选择地区")]),t("p",{staticClass:"content"},e._l(e.excludedRegions.selectedText,(function(a,r){return t("span",{key:r},[t("span",[e._v(e._s(a.name))]),a.citys.length?[t("span",[e._v("[")]),e._l(a.citys,(function(r,i){return t("span",{key:i,staticClass:"city-name"},[e._v(e._s(r.name)+e._s(a.citys.length>i+1?"、":""))])})),t("span",[e._v("]")])]:e._e(),t("span",{staticClass:"mr-5"})],2)})),0)],1),t("a-form-item",{attrs:{label:"满额包邮说明",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{rules:[{required:!0,message:"请输入满额包邮说明"}]}],expression:"['describe', { rules: [{ required: true, message: '请输入满额包邮说明' }] }]"}],attrs:{autoSize:{minRows:4}}})],1),t("a-form-item",{attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1),t("AreasModal",{ref:"AreasModal",on:{handleSubmit:e.handleAreaSubmit}})],1)],1)},i=[],s=t("1da1"),n=(t("d3b7"),t("ddb0"),t("96cf"),t("88bc")),o=t.n(n),l=t("f585"),u=t("d084"),c=t("2af9"),d=t("fd0d"),m={components:{SelectGoods:c["d"],AreasModal:d["a"]},data:function(){return{key:"full_free",labelCol:{span:4},wrapperCol:{span:12},isLoading:!1,form:this.$form.createForm(this),record:{},excludedRegions:{cityIds:[],selectedText:[]},excludedGoodsList:[]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getDetail();case 2:return a.next=4,e.getExcludedGoodsList();case 4:case"end":return a.stop()}}),a)})))()},methods:{getDetail:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isLoading=!0,a.next=3,l["a"](e.key).then((function(a){e.record=a.data.values,e.setFieldsValue()})).finally((function(a){e.isLoading=!1}));case 3:case"end":return a.stop()}}),a)})))()},getExcludedGoodsList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.record.excludedGoodsIds,!(t.length>0)){a.next=5;break}return e.isLoading=!0,a.next=5,u["f"](t).then((function(a){e.excludedGoodsList=a.data.list})).finally((function(a){e.isLoading=!1}));case 5:case"end":return a.stop()}}),a)})))()},setFieldsValue:function(){var e=this,a=this.record,t=this.$nextTick,r=this.form.setFieldsValue;t((function(){e.excludedRegions=a.excludedRegions,r(o()(a,["is_open","money","describe"]))}))},handleAreasModal:function(){this.$refs.AreasModal.handle({},this.excludedRegions.cityIds)},handleAreaSubmit:function(e){this.excludedRegions={cityIds:e.selectedCityIds,selectedText:e.selectedText}},handleSubmit:function(e){var a=this;e.preventDefault();var t=this.form.validateFields,r=this.excludedRegions;t((function(e,t){e||(t.excludedRegions=r,a.onFormSubmit(t))}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,l["b"](this.key,{form:e}).then((function(e){a.$message.success(e.message,1.5)})).finally((function(e){a.isLoading=!1}))}}},p=m,f=(t("4ace"),t("2877")),v=Object(f["a"])(p,r,i,!1,null,"60008742",null);a["default"]=v.exports},"164a":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-alert",{attrs:{message:"注：优惠券只能抵扣商品金额，最多优惠到0.01元，不能抵扣运费",banner:""}}),t("div",{staticClass:"table-operator"},[t("a-row",[t("a-col",{attrs:{span:6}},[e.$auth("/market/coupon/create")?t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]):e._e()],1),t("a-col",{attrs:{span:8,offset:10}},[t("a-input-search",{staticStyle:{"max-width":"300px","min-width":"150px",float:"right"},attrs:{placeholder:"请输入优惠券名称"},on:{search:e.onSearch},model:{value:e.queryParam.search,callback:function(a){e.$set(e.queryParam,"search",a)},expression:"queryParam.search"}})],1)],1)],1),t("s-table",{ref:"table",attrs:{rowKey:"coupon_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"coupon_type",fn:function(a){return[t("a-tag",[e._v(e._s(e.CouponTypeEnum[a].name))])]}},{key:"min_price",fn:function(a){return[t("p",{staticClass:"c-p"},[e._v(e._s(a))])]}},{key:"discount",fn:function(a){return[10==a.coupon_type?[t("span",[e._v("立减")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.reduce_price))]),t("span",[e._v("元")])]:e._e(),20==a.coupon_type?[t("span",[e._v("打")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.discount))]),t("span",[e._v("折")])]:e._e()]}},{key:"duetime",fn:function(a){return[10==a.expire_type?[t("span",[e._v("领取")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.expire_day))]),t("span",[e._v("天内有效")])]:e._e(),20==a.expire_type?[t("span",[e._v(e._s(a.start_time)+" ~ "+e._s(a.end_time))])]:e._e()]}},{key:"status",fn:function(a){return[t("a-tag",{attrs:{color:a?"green":""}},[e._v(e._s(a?"显示":"隐藏"))])]}},{key:"action",fn:function(a){return t("span",{staticClass:"actions"},[e.$auth("/market/coupon/update")?t("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]):e._e(),t("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])])}}])})],1)},i=[],s=t("5530"),n=(t("d3b7"),t("39ad9")),o=t("2af9"),l=t("8fa3"),u={name:"Index",components:{STable:o["c"]},data:function(){var e=this;return{queryParam:{},ApplyRangeEnum:l["a"],CouponTypeEnum:l["b"],ExpireTypeEnum:l["c"],isLoading:!1,columns:[{title:"优惠券ID",dataIndex:"coupon_id"},{title:"优惠券名称",dataIndex:"name"},{title:"优惠券类型",dataIndex:"coupon_type",scopedSlots:{customRender:"coupon_type"}},{title:"最低消费金额 (元)",dataIndex:"min_price",scopedSlots:{customRender:"min_price"}},{title:"优惠方式",scopedSlots:{customRender:"discount"}},{title:"已发放/领取数量",dataIndex:"receive_num"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(a){return n["e"](Object(s["a"])(Object(s["a"])({},a),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleAdd:function(){this.$router.push("./create")},handleEdit:function(e){this.$router.push({path:"./update",query:{couponId:e.coupon_id}})},handleDelete:function(e){var a=this,t=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return n["b"]({couponId:e.coupon_id}).then((function(e){a.$message.success(e.message,1.5),a.handleRefresh()})).finally((function(e){t.destroy()}))}})},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)},onSearch:function(){this.handleRefresh(!0)}}},c=u,d=t("2877"),m=Object(d["a"])(c,r,i,!1,null,null,null);a["default"]=m.exports},"193f":function(e,a,t){"use strict";t("ca5c")},"1d32":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"优惠券名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['name', { rules: [{ required: true, min: 2, message: '请输入至少2个字符' }] }]"}],attrs:{placeholder:"请输入优惠券名称"}})],1),t("a-form-item",{attrs:{label:"优惠券类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["coupon_type",{initialValue:10,rules:[{required:!0}]}],expression:"['coupon_type', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("满减券")]),t("a-radio",{attrs:{value:20}},[e._v("折扣券")])],1)],1),10==e.form.getFieldValue("coupon_type")?t("a-form-item",{attrs:{label:"减免金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["reduce_price",{rules:[{required:!0,message:"请输入减免金额"}]}],expression:"['reduce_price', { rules: [{ required: true, message: '请输入减免金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-5"},[e._v("元")])],1):e._e(),20==e.form.getFieldValue("coupon_type")?t("a-form-item",{attrs:{label:"折扣率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{initialValue:9.9,rules:[{required:!0,message:"请输入折扣率"}]}],expression:"['discount', { initialValue: 9.9, rules: [{ required: true, message: '请输入折扣率' }] }]"}],attrs:{min:0,max:9.9,precision:1}}),t("span",{staticClass:"ml-5"},[e._v("%")]),t("p",{staticClass:"form-item-help"},[t("small",[e._v("折扣率范围 0-9.9，8代表打8折，0代表不折扣")])])],1):e._e(),t("a-form-item",{attrs:{label:"最低消费金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_price",{rules:[{required:!0,message:"请输入最低消费金额"}]}],expression:"['min_price', { rules: [{ required: true, message: '请输入最低消费金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-5"},[e._v("元")])],1),t("a-form-item",{attrs:{label:"到期类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_type",{initialValue:10,rules:[{required:!0}]}],expression:"['expire_type', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("领取后生效")]),t("a-radio",{attrs:{value:20}},[e._v("固定时间")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("expire_type"),expression:"form.getFieldValue('expire_type') == 10"}],staticClass:"expire_type-10"},[t("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_day",{initialValue:7,rules:[{required:!0,message:"请输入有效期天数"}]}],expression:"['expire_day', { initialValue: 7, rules: [{ required: true, message: '请输入有效期天数' }] }]"}],attrs:{addonBefore:"有效期",addonAfter:"天",inputProps:{min:1,precision:0}}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("expire_type"),expression:"form.getFieldValue('expire_type') == 20"}],staticClass:"expire_type-20"},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime",{initialValue:e.defaultDate,rules:[{required:!0,message:"请选择有效期范围"}]}],expression:"['betweenTime', { initialValue: defaultDate, rules: [{ required: true, message: '请选择有效期范围' }] }]"}],attrs:{format:"YYYY-MM-DD"}})],1)],1),t("a-form-item",{attrs:{label:"券适用范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range",{initialValue:10,rules:[{required:!0}]}],expression:"['apply_range', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("全场通用")]),t("a-radio",{attrs:{value:20}},[e._v("指定商品")])],1),20==e.form.getFieldValue("apply_range")?t("a-form-item",[t("SelectGoods",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range_config.applyGoodsIds",{initialValue:[],rules:[{required:!0,message:"请选择指定的商品"}]}],expression:"['apply_range_config.applyGoodsIds', { initialValue: [], rules: [{ required: true, message: '请选择指定的商品' }] }]"}],attrs:{defaultList:e.containGoodsList}})],1):e._e()],1),t("a-form-item",{attrs:{label:"发放总数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["total_num",{initialValue:-1,rules:[{required:!0,message:"请输入发放总数量"}]}],expression:"['total_num', { initialValue: -1, rules: [{ required: true, message: '请输入发放总数量' }] }]"}],attrs:{min:-1,precision:0}}),t("span",{staticClass:"ml-5"},[e._v("张")]),t("p",{staticClass:"form-item-help"},[t("small",[e._v("发放的优惠券总数量，-1为不限制")])])],1),t("a-form-item",{attrs:{label:"显示状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', { initialValue: 1, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("显示")]),t("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1),t("p",{staticClass:"form-item-help"},[t("small",[e._v("如果设为隐藏将不会展示在用户端页面")])])],1),t("a-form-item",{attrs:{label:"优惠券描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"['describe']"}],attrs:{autoSize:{minRows:4}}})],1),t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules:[{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1),t("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],s=(t("d3b7"),t("c1df")),n=t.n(s),o=t("39ad9"),l=t("2af9"),u=t("8fa3"),c={components:{SelectGoods:l["d"],InputNumberGroup:l["b"]},data:function(){return{ApplyRangeEnum:u["a"],CouponTypeEnum:u["b"],ExpireTypeEnum:u["c"],isLoading:!1,isBtnLoading:!1,labelCol:{span:3},wrapperCol:{span:10},form:this.$form.createForm(this),defaultDate:[n()(),n()()],containGoodsList:[]}},created:function(){var e=this;this.$nextTick((function(){e.$forceUpdate()}))},methods:{handleSubmit:function(e){e.preventDefault();var a=this.form.validateFields,t=this.onFormSubmit;a((function(e,a){!e&&t(a)}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,this.isBtnLoading=!0,o["a"]({form:e}).then((function(e){a.$message.success(e.message,1.5),setTimeout((function(){a.$router.push("./index")}),1500)})).catch((function(){a.isBtnLoading=!1})).finally((function(e){a.isLoading=!1}))}}},d=c,m=(t("9736"),t("2877")),p=Object(m["a"])(d,r,i,!1,null,"0483d2f3",null);a["default"]=p.exports},"1da1":function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));t("d3b7");function r(e,a,t,r,i,s,n){try{var o=e[s](n),l=o.value}catch(u){return void t(u)}o.done?a(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var a=this,t=arguments;return new Promise((function(i,s){var n=e.apply(a,t);function o(e){r(n,i,s,o,l,"next",e)}function l(e){r(n,i,s,o,l,"throw",e)}o(void 0)}))}}},2090:function(e,a,t){"use strict";t("93c1")},3008:function(e,a,t){"use strict";t.d(a,"e",(function(){return s})),t.d(a,"c",(function(){return n})),t.d(a,"a",(function(){return o})),t.d(a,"d",(function(){return l})),t.d(a,"b",(function(){return u}));var r=t("b775"),i={list:"/market.seckill/list",detail:"/market.seckill/detail",receive:"/market.seckill/receive",add:"/market.seckill/add",edit:"/market.seckill/edit",delete:"/market.seckill/delete"};function s(e){return Object(r["b"])({url:i.list,method:"get",params:e})}function n(e){return Object(r["b"])({url:i.detail,method:"get",params:e})}function o(e){return Object(r["b"])({url:i.add,method:"post",data:e})}function l(e){return Object(r["b"])({url:i.edit,method:"post",data:e})}function u(e){return Object(r["b"])({url:i.delete,method:"post",data:e})}},3095:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"是否开启会员充值",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_entrance",{rules:[{required:!0}]}],expression:"['is_entrance', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("开启")]),t("a-radio",{attrs:{value:0}},[e._v("关闭")])],1),t("div",{staticClass:"form-item-help"},[t("small",[e._v("如设置关闭则用户端不显示充值按钮")])])],1),t("a-form-item",{attrs:{label:"充值自定义金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_custom",{rules:[{required:!0}]}],expression:"['is_custom', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("允许")]),t("a-radio",{attrs:{value:0}},[e._v("不允许")])],1),t("div",{staticClass:"form-item-help"},[t("small",[e._v("是否允许用户填写自定义的充值金额")])])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.getFieldValue("is_custom"),expression:"form.getFieldValue('is_custom') == 1"}],attrs:{label:"最低充值金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["lowest_money",{rules:[{required:!0,message:"请输入最低充值金额"}]}],expression:"['lowest_money', { rules: [{ required: true, message: '请输入最低充值金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-10"},[e._v("元")]),t("div",{staticClass:"form-item-help"},[t("small",[e._v("低于该设定金额时不允许充值")])])],1),t("a-form-item",{attrs:{label:"自动匹配套餐",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_match_plan",{rules:[{required:!0}]}],expression:"['is_match_plan', { rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("开启")]),t("a-radio",{attrs:{value:0}},[e._v("关闭")])],1),t("div",{staticClass:"form-item-help"},[t("small",[e._v("充值自定义金额时 是否自动匹配充值套餐，如不开启则不参与套餐金额赠送")])])],1),t("a-form-item",{attrs:{label:"充值说明",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{rules:[{required:!0,message:"请输入充值说明"}]}],expression:"['describe', { rules: [{ required: true, message: '请输入充值说明' }] }]"}],attrs:{autoSize:{minRows:4}}})],1),t("a-form-item",{attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)},i=[],s=(t("d3b7"),t("ddb0"),t("88bc")),n=t.n(s),o=t("f585"),l={components:{},data:function(){return{key:"recharge",labelCol:{span:4},wrapperCol:{span:10},isLoading:!1,form:this.$form.createForm(this),record:{}}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.isLoading=!0,o["a"](this.key).then((function(a){e.record=a.data.values,e.setFieldsValue()})).finally((function(a){e.isLoading=!1}))},setFieldsValue:function(){var e=this.record,a=this.$nextTick,t=this.form.setFieldsValue;a((function(){t(n()(e,["is_entrance","is_custom","lowest_money","is_match_plan","describe"]))}))},handleSubmit:function(e){var a=this;e.preventDefault();var t=this.form.validateFields;t((function(e,t){!e&&a.onFormSubmit(t)}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,o["b"](this.key,{form:e}).then((function(e){a.$message.success(e.message,1.5)})).finally((function(e){a.isLoading=!1}))}}},u=l,c=(t("0b50"),t("2877")),d=Object(c["a"])(u,r,i,!1,null,"65eaa220",null);a["default"]=d.exports},"374b":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("div",{staticClass:"table-operator"},[t("a-row",{staticClass:"row-item-search"},[t("a-form",{staticClass:"search-form",attrs:{form:e.searchForm,layout:"inline"},on:{submit:e.handleSearch}},[t("a-form-item",{attrs:{label:"会员昵称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["search"],expression:"['search']"}],attrs:{placeholder:"请输入会员昵称"}})],1),t("a-form-item",{attrs:{label:"变动时间"}},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime"],expression:"['betweenTime']"}],attrs:{format:"YYYY-MM-DD"}})],1),t("a-form-item",{staticClass:"search-btn"},[t("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("搜索")])],1)],1)],1)],1),t("s-table",{ref:"table",attrs:{rowKey:"log_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"user",fn:function(e){return t("span",{},[t("UserItem",{attrs:{user:e}})],1)}},{key:"value",fn:function(a){return t("span",{},[t("p",{staticClass:"c-p"},[e._v(e._s(a>0?"+":"")+e._s(a))])])}}])})],1)},i=[],s=t("5530"),n=t("b775"),o={log:"/market.points/log"};function l(e){return Object(n["b"])({url:o.log,method:"get",params:e})}var u=t("ab09"),c=t("fe7e"),d={name:"Index",components:{STable:u["c"],UserItem:u["d"]},data:function(){var e=this;return{SceneEnum:c["a"],searchForm:this.$form.createForm(this),queryParam:{},isLoading:!1,columns:[{title:"ID",dataIndex:"log_id"},{title:"会员信息",dataIndex:"user",scopedSlots:{customRender:"user"}},{title:"变动数量",dataIndex:"value",scopedSlots:{customRender:"value"}},{title:"描述/说明",dataIndex:"describe"},{title:"管理员备注",dataIndex:"remark"},{title:"变动时间",dataIndex:"create_time"}],loadData:function(a){return l(Object(s["a"])(Object(s["a"])({},a),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)},handleSearch:function(e){var a=this;e.preventDefault(),this.searchForm.validateFields((function(e,t){e||(a.queryParam=Object(s["a"])(Object(s["a"])({},a.queryParam),t),a.handleRefresh(!0))}))}}},m=d,p=(t("193f"),t("2877")),f=Object(p["a"])(m,r,i,!1,null,"0d4db7ff",null);a["default"]=f.exports},"39ad9":function(e,a,t){"use strict";t.d(a,"e",(function(){return s})),t.d(a,"c",(function(){return n})),t.d(a,"f",(function(){return o})),t.d(a,"a",(function(){return l})),t.d(a,"d",(function(){return u})),t.d(a,"b",(function(){return c}));var r=t("b775"),i={list:"/market.coupon/list",detail:"/market.coupon/detail",receive:"/market.coupon/receive",add:"/market.coupon/add",edit:"/market.coupon/edit",delete:"/market.coupon/delete"};function s(e){return Object(r["b"])({url:i.list,method:"get",params:e})}function n(e){return Object(r["b"])({url:i.detail,method:"get",params:e})}function o(e){return Object(r["b"])({url:i.receive,method:"get",params:e})}function l(e){return Object(r["b"])({url:i.add,method:"post",data:e})}function u(e){return Object(r["b"])({url:i.edit,method:"post",data:e})}function c(e){return Object(r["b"])({url:i.delete,method:"post",data:e})}},"3d2f":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("div",{staticClass:"table-operator"},[t("a-row",{staticClass:"row-item-search"},[t("a-form",{staticClass:"search-form",attrs:{form:e.searchForm,layout:"inline"},on:{submit:e.handleSearch}},[t("a-form-item",{attrs:{label:"优惠券名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["couponName"],expression:"['couponName']"}],attrs:{placeholder:"请输入优惠券名称"}})],1),t("a-form-item",{attrs:{label:"会员昵称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],attrs:{placeholder:"请输入会员昵称"}})],1),t("a-form-item",{attrs:{label:"领取时间"}},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime"],expression:"['betweenTime']"}],attrs:{format:"YYYY-MM-DD"}})],1),t("a-form-item",{staticClass:"search-btn"},[t("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("搜索")])],1)],1)],1)],1),t("s-table",{ref:"table",attrs:{rowKey:"user_coupon_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"user",fn:function(e){return[t("UserItem",{attrs:{user:e}})]}},{key:"coupon_type",fn:function(a){return[t("a-tag",[e._v(e._s(e.CouponTypeEnum[a].name))])]}},{key:"min_price",fn:function(a){return[t("p",{staticClass:"c-p"},[e._v(e._s(a))])]}},{key:"discount",fn:function(a){return[a.coupon_type==e.CouponTypeEnum.FULL_DISCOUNT.value?[t("span",[e._v("立减")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.reduce_price))]),t("span",[e._v("元")])]:e._e(),a.coupon_type==e.CouponTypeEnum.DISCOUNT.value?[t("span",[e._v("打")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.discount))]),t("span",[e._v("折")])]:e._e()]}},{key:"duetime",fn:function(a){return[10==a.expire_type?[t("span",[e._v("领取")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.expire_day))]),t("span",[e._v("天内有效")])]:e._e(),20==a.expire_type?[t("span",[e._v(e._s(a.start_time)+" ~ "+e._s(a.end_time))])]:e._e()]}}])})],1)},i=[],s=t("5530"),n=t("39ad9"),o=t("ab09"),l=t("8fa3"),u={name:"Index",components:{STable:o["c"],UserItem:o["d"]},data:function(){var e=this;return{searchForm:this.$form.createForm(this),queryParam:{},CouponTypeEnum:l["b"],isLoading:!1,columns:[{title:"ID",dataIndex:"user_coupon_id"},{title:"会员信息",dataIndex:"user",scopedSlots:{customRender:"user"}},{title:"优惠券名称",dataIndex:"name"},{title:"优惠券类型",dataIndex:"coupon_type",scopedSlots:{customRender:"coupon_type"}},{title:"最低消费金额 (元)",dataIndex:"min_price",scopedSlots:{customRender:"min_price"}},{title:"优惠方式",scopedSlots:{customRender:"discount"}},{title:"有效期",scopedSlots:{customRender:"duetime"}},{title:"领取时间",dataIndex:"create_time"}],loadData:function(a){return n["f"](Object(s["a"])(Object(s["a"])({},a),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)},handleSearch:function(e){var a=this;e.preventDefault(),this.searchForm.validateFields((function(e,t){e||(a.queryParam=Object(s["a"])(Object(s["a"])({},a.queryParam),t),a.handleRefresh(!0))}))}}},c=u,d=t("2877"),m=Object(d["a"])(c,r,i,!1,null,null,null);a["default"]=m.exports},"4ab8":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"秒杀范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("SelectGoodsEdit",{attrs:{defaultList:e.containGoodsList}})],1),t("a-form-item",{attrs:{label:"到期类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-form-item",{staticClass:"expire_type-20"},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime",{initialValue:e.defaultDate,rules:[{required:!0,message:"请选择有效期范围"}]}],expression:"['betweenTime', { initialValue: defaultDate, rules: [{ required: true, message: '请选择有效期范围' }] }]"}],attrs:{showTime:{defaultValue:[e.moment("00:00:00","HH:mm:ss"),e.moment("23:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"}})],1)],1),t("a-form-item",{attrs:{label:"显示状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', { initialValue: 1, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("显示")]),t("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1),t("p",{staticClass:"form-item-help"},[t("small",[e._v("如果设为隐藏将不会展示在用户端页面")])])],1),t("a-form-item",{attrs:{label:"秒杀描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"['describe']"}],attrs:{autoSize:{minRows:4}}})],1),t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules:[{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1),t("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],s=t("1da1"),n=(t("d3b7"),t("96cf"),t("c1df")),o=t.n(n),l=t("2ef0"),u=t("3008"),c=t("d084"),d=t("ca00"),m=t("2af9"),p=t("c8ce"),f={components:{SelectGoodsEdit:m["e"],InputNumberGroup:m["b"]},data:function(){return{ApplyRangeEnum:p["a"],CouponTypeEnum:p["CouponTypeEnum"],ExpireTypeEnum:p["c"],isLoading:!1,isBtnLoading:!1,labelCol:{span:3},wrapperCol:{span:10},form:this.$form.createForm(this),defaultDate:[o()(),o()()],seckillId:null,record:{},containGoodsList:[]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.seckillId=e.$route.query.seckillId,a.next=3,e.getDetail();case 3:return a.next=5,e.getContainGoodsList();case 5:case"end":return a.stop()}}),a)})))()},methods:{moment:o.a,getDetail:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.seckillId,e.isLoading=!0,a.next=4,u["c"]({seckillId:t}).then((function(a){e.record=a.data.detail,e.setFieldsValue()})).finally((function(){e.isLoading=!1}));case 4:case"end":return a.stop()}}),a)})))()},getContainGoodsList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.record,r=Object(l["get"])(t,"apply_range_config.applyGoodsIds"),void 0===r||!r.length){a.next=6;break}return e.isLoading=!0,a.next=6,c["f"](r).then((function(a){e.containGoodsList=a.data.list})).finally((function(a){e.isLoading=!1}));case 6:case"end":return a.stop()}}),a)})))()},setFieldsValue:function(){var e=this,a=this.record,t=this.form,r=this.$nextTick;!Object(d["f"])(t.getFieldsValue())&&r((function(){var r=Object(l["pick"])(a,["seckil_price","status","describe","sort"]);r.betweenTime=e.getBetweenTime(a),t.setFieldsValue(r)}))},getBetweenTime:function(e){return[o()(new Date(e.start_time)),o()(new Date(e.end_time))]},handleSubmit:function(e){e.preventDefault();var a=this.form.validateFields,t=this.onFormSubmit;a((function(e,a){!e&&t(a)}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,this.isBtnLoading=!0,u["d"]({seckillId:this.seckillId,form:e}).then((function(e){a.$message.success(e.message,1.5),setTimeout((function(){a.$router.push("./index")}),1500)})).catch((function(){a.isBtnLoading=!1})).finally((function(e){a.isLoading=!1}))}}},v=f,b=(t("a8a6"),t("2877")),_=Object(b["a"])(v,r,i,!1,null,"d7216f12",null);a["default"]=_.exports},"4ace":function(e,a,t){"use strict";t("bf3e")},5512:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"优惠券名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['name', { rules: [{ required: true, min: 2, message: '请输入至少2个字符' }] }]"}],attrs:{placeholder:"请输入优惠券名称"}})],1),t("a-form-item",{attrs:{label:"优惠券类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["coupon_type",{initialValue:10,rules:[{required:!0}]}],expression:"['coupon_type', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("满减券")]),t("a-radio",{attrs:{value:20}},[e._v("折扣券")])],1)],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.getFieldValue("coupon_type")==e.CouponTypeEnum.FULL_DISCOUNT.value,expression:"form.getFieldValue('coupon_type') == CouponTypeEnum.FULL_DISCOUNT.value"}],attrs:{label:"减免金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["reduce_price",{rules:[{required:!0,message:"请输入减免金额"}]}],expression:"['reduce_price', { rules: [{ required: true, message: '请输入减免金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-5"},[e._v("元")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.getFieldValue("coupon_type")==e.CouponTypeEnum.DISCOUNT.value,expression:"form.getFieldValue('coupon_type') == CouponTypeEnum.DISCOUNT.value"}],attrs:{label:"折扣率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{initialValue:9.9,rules:[{required:!0,message:"请输入折扣率"}]}],expression:"['discount', { initialValue: 9.9, rules: [{ required: true, message: '请输入折扣率' }] }]"}],attrs:{min:0,max:9.9,precision:1}}),t("span",{staticClass:"ml-5"},[e._v("%")]),t("p",{staticClass:"form-item-help"},[t("small",[e._v("折扣率范围 0-9.9，8代表打8折，0代表不折扣")])])],1),t("a-form-item",{attrs:{label:"最低消费金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_price",{rules:[{required:!0,message:"请输入最低消费金额"}]}],expression:"['min_price', { rules: [{ required: true, message: '请输入最低消费金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-5"},[e._v("元")])],1),t("a-form-item",{attrs:{label:"到期类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_type",{initialValue:10,rules:[{required:!0}]}],expression:"['expire_type', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("领取后生效")]),t("a-radio",{attrs:{value:20}},[e._v("固定时间")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("expire_type"),expression:"form.getFieldValue('expire_type') == 10"}],staticClass:"expire_type-10"},[t("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_day",{initialValue:7,rules:[{required:!0,message:"请输入有效期天数"}]}],expression:"['expire_day', { initialValue: 7, rules: [{ required: true, message: '请输入有效期天数' }] }]"}],attrs:{addonBefore:"有效期",addonAfter:"天",inputProps:{min:1,precision:0}}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("expire_type"),expression:"form.getFieldValue('expire_type') == 20"}],staticClass:"expire_type-20"},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime",{initialValue:e.defaultDate,rules:[{required:!0,message:"请选择有效期范围"}]}],expression:"['betweenTime', { initialValue: defaultDate, rules: [{ required: true, message: '请选择有效期范围' }] }]"}],attrs:{format:"YYYY-MM-DD"}})],1)],1),t("a-form-item",{attrs:{label:"券适用范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range",{initialValue:10,rules:[{required:!0}]}],expression:"['apply_range', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("全场通用")]),t("a-radio",{attrs:{value:20}},[e._v("指定商品")])],1),20==e.form.getFieldValue("apply_range")?t("a-form-item",[t("SelectGoods",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range_config.applyGoodsIds",{rules:[{required:!0,message:"请选择指定的商品"}]}],expression:"['apply_range_config.applyGoodsIds', { rules: [{ required: true, message: '请选择指定的商品' }] }]"}],attrs:{defaultList:e.containGoodsList}})],1):e._e()],1),t("a-form-item",{attrs:{label:"发放总数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["total_num",{initialValue:-1,rules:[{required:!0,message:"请输入发放总数量"}]}],expression:"['total_num', { initialValue: -1, rules: [{ required: true, message: '请输入发放总数量' }] }]"}],attrs:{min:-1,precision:0}}),t("span",{staticClass:"ml-5"},[e._v("张")]),t("p",{staticClass:"form-item-help"},[t("small",[e._v("发放的优惠券总数量，-1为不限制")])])],1),t("a-form-item",{attrs:{label:"显示状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', { initialValue: 1, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("显示")]),t("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1),t("p",{staticClass:"form-item-help"},[t("small",[e._v("如果设为隐藏将不会展示在用户端页面")])])],1),t("a-form-item",{attrs:{label:"优惠券描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"['describe']"}],attrs:{autoSize:{minRows:4}}})],1),t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules:[{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1),t("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],s=t("1da1"),n=(t("d3b7"),t("96cf"),t("c1df")),o=t.n(n),l=t("2ef0"),u=t("39ad9"),c=t("d084"),d=t("ca00"),m=t("2af9"),p=t("8fa3"),f={components:{SelectGoods:m["d"],InputNumberGroup:m["b"]},data:function(){return{ApplyRangeEnum:p["a"],CouponTypeEnum:p["b"],ExpireTypeEnum:p["c"],isLoading:!1,isBtnLoading:!1,labelCol:{span:3},wrapperCol:{span:10},form:this.$form.createForm(this),defaultDate:[o()(),o()()],couponId:null,record:{},containGoodsList:[]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.couponId=e.$route.query.couponId,a.next=3,e.getDetail();case 3:return a.next=5,e.getContainGoodsList();case 5:case"end":return a.stop()}}),a)})))()},methods:{getDetail:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.couponId,e.isLoading=!0,a.next=4,u["c"]({couponId:t}).then((function(a){e.record=a.data.detail,e.setFieldsValue()})).finally((function(){e.isLoading=!1}));case 4:case"end":return a.stop()}}),a)})))()},getContainGoodsList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.record,r=Object(l["get"])(t,"apply_range_config.applyGoodsIds"),void 0===r||!r.length){a.next=6;break}return e.isLoading=!0,a.next=6,c["f"](r).then((function(a){e.containGoodsList=a.data.list})).finally((function(a){e.isLoading=!1}));case 6:case"end":return a.stop()}}),a)})))()},setFieldsValue:function(){var e=this,a=this.record,t=this.form,r=this.$nextTick;!Object(d["f"])(t.getFieldsValue())&&r((function(){var r=Object(l["pick"])(a,["name","coupon_type","reduce_price","discount","min_price","status","expire_type","expire_day","apply_range","total_num","describe","sort"]);r.betweenTime=e.getBetweenTime(a),t.setFieldsValue(r)}))},getBetweenTime:function(e){return e.expire_type===p["c"].FIXED_TIME.value?[o()(new Date(e.start_time)),o()(new Date(e.end_time))]:this.defaultDate},handleSubmit:function(e){e.preventDefault();var a=this.form.validateFields,t=this.onFormSubmit;a((function(e,a){!e&&t(a)}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,this.isBtnLoading=!0,u["d"]({couponId:this.couponId,form:e}).then((function(e){a.$message.success(e.message,1.5),setTimeout((function(){a.$router.push("./index")}),1500)})).catch((function(){a.isBtnLoading=!1})).finally((function(e){a.isLoading=!1}))}}},v=f,b=(t("c561"),t("2877")),_=Object(b["a"])(v,r,i,!1,null,"1d749378",null);a["default"]=_.exports},6767:function(e,a,t){"use strict";t("f1fa")},"6ad7":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("div",{staticClass:"table-operator"},[t("a-row",[t("a-col",{attrs:{span:6}},[t("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),t("a-col",{attrs:{span:8,offset:10}},[t("a-input-search",{staticStyle:{"max-width":"300px","min-width":"150px",float:"right"},attrs:{placeholder:"请输入套餐名称"},on:{search:e.onSearch},model:{value:e.queryParam.search,callback:function(a){e.$set(e.queryParam,"search",a)},expression:"queryParam.search"}})],1)],1)],1),t("s-table",{ref:"table",attrs:{rowKey:"plan_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"money",fn:function(a){return t("span",{},[t("p",{staticClass:"c-p"},[e._v(e._s(a))])])}},{key:"gift_money",fn:function(a){return t("span",{},[t("p",{staticClass:"c-p"},[e._v(e._s(a))])])}},{key:"action",fn:function(a,r){return t("span",{},[t("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],staticStyle:{"margin-right":"8px"},on:{click:function(a){return e.handleEdit(r)}}},[e._v("编辑")]),t("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(a){return e.handleDelete(r)}}},[e._v("删除")])])}}])}),t("AddForm",{ref:"AddForm",on:{handleSubmit:e.handleRefresh}}),t("EditForm",{ref:"EditForm",on:{handleSubmit:e.handleRefresh}})],1)},i=[],s=t("5530"),n=(t("d3b7"),t("b775")),o={list:"/market.recharge.plan/list",add:"/market.recharge.plan/add",edit:"/market.recharge.plan/edit",delete:"/market.recharge.plan/delete"};function l(e){return Object(n["b"])({url:o.list,method:"get",params:e})}function u(e){return Object(n["b"])({url:o.add,method:"post",data:e})}function c(e){return Object(n["b"])({url:o.edit,method:"post",data:e})}function d(e){return Object(n["b"])({url:o.delete,method:"post",data:e})}var m=t("2af9"),p=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.title,width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"套餐名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"便于后台查找，例如：充100元送10元"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["plan_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['plan_name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}]})],1),t("a-form-item",{attrs:{label:"充值金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"会员充值并支付的金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["money",{rules:[{required:!0,message:"请输入充值的金额"}]}],expression:"['money', {rules: [{required: true, message: '请输入充值的金额'}]}]"}],attrs:{min:.01}}),t("span",{staticClass:"ml-10"},[e._v("元")])],1),t("a-form-item",{attrs:{label:"赠送金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"充值成功后赠送的金额，不能大于充值金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["gift_money",{rules:[{required:!0,message:"请输入赠送的金额"}]}],expression:"['gift_money', {rules: [{required: true, message: '请输入赠送的金额'}]}]"}],attrs:{min:.01}}),t("span",{staticClass:"ml-10"},[e._v("元")])],1),t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},f=[],v={data:function(){return{title:"新增充值套餐",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this)}},methods:{add:function(){this.visible=!0},handleSubmit:function(e){var a=this;e.preventDefault();var t=this.form.validateFields;t((function(e,t){!e&&a.onFormSubmit(t)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var a=this;this.confirmLoading=!0,u({form:e}).then((function(t){a.$message.success(t.message,1.5),a.handleCancel(),a.$emit("handleSubmit",e)})).finally((function(){a.confirmLoading=!1}))}}},b=v,_=t("2877"),h=Object(_["a"])(b,p,f,!1,null,null,null),g=h.exports,C=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.title,width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"套餐名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"便于后台查找，例如：充100元送10元"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["plan_name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['plan_name', {rules: [{required: true, min: 2, message: '请输入至少2个字符'}]}]"}]})],1),t("a-form-item",{attrs:{label:"充值金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"会员充值并支付的金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["money",{rules:[{required:!0,message:"请输入充值的金额"}]}],expression:"['money', {rules: [{required: true, message: '请输入充值的金额'}]}]"}],attrs:{min:.01}}),t("span",{staticClass:"ml-10"},[e._v("元")])],1),t("a-form-item",{attrs:{label:"赠送金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"充值成功后赠送的金额，不能大于充值金额"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["gift_money",{rules:[{required:!0,message:"请输入赠送的金额"}]}],expression:"['gift_money', {rules: [{required: true, message: '请输入赠送的金额'}]}]"}],attrs:{min:.01}}),t("span",{staticClass:"ml-10"},[e._v("元")])],1),t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules: [{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1)],1)],1)],1)},w=[],y=t("88bc"),x=t.n(y),q={data:function(){return{title:"编辑充值套餐",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),record:{}}},methods:{edit:function(e){this.visible=!0,this.record=e,this.setFieldsValue()},setFieldsValue:function(){var e=this,a=this.form.setFieldsValue;this.$nextTick((function(){a(x()(e.record,["plan_name","money","gift_money","sort"]))}))},handleSubmit:function(e){var a=this;e.preventDefault();var t=this.form.validateFields;t((function(e,t){!e&&a.onFormSubmit(t)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var a=this;this.confirmLoading=!0,c({planId:this.record.plan_id,form:e}).then((function(t){a.$message.success(t.message,1.5),a.handleCancel(),a.$emit("handleSubmit",e)})).finally((function(){a.confirmLoading=!1}))}}},k=q,S=Object(_["a"])(k,C,w,!1,null,null,null),V=S.exports,N={name:"Index",components:{STable:m["c"],AddForm:g,EditForm:V},data:function(){var e=this;return{queryParam:{},isLoading:!1,columns:[{title:"套餐ID",dataIndex:"plan_id"},{title:"套餐名称",dataIndex:"plan_name"},{title:"充值金额 (元)",dataIndex:"money",scopedSlots:{customRender:"money"}},{title:"赠送金额 (元)",dataIndex:"gift_money",scopedSlots:{customRender:"gift_money"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(a){return l(Object(s["a"])(Object(s["a"])({},a),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleAdd:function(){this.$refs.AddForm.add()},handleEdit:function(e){this.$refs.EditForm.edit(e)},handleDelete:function(e){var a=this,t=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return d({planId:e.plan_id}).then((function(e){a.$message.success(e.message,1.5),a.handleRefresh()})).finally((function(e){t.destroy()}))}})},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)},onSearch:function(){this.handleRefresh(!0)}}},L=N,I=Object(_["a"])(L,r,i,!1,null,null,null);a["default"]=I.exports},70237:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-alert",{attrs:{message:"注：助力券只能抵扣商品金额，最多优惠到0.02元，不能抵扣运费",banner:""}}),t("div",{staticClass:"table-operator"},[t("a-row",[t("a-col",{attrs:{span:6}},[e.$auth("/market/coupon/create")?t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]):e._e()],1),t("a-col",{attrs:{span:8,offset:10}},[t("a-input-search",{staticStyle:{"max-width":"300px","min-width":"150px",float:"right"},attrs:{placeholder:"请输入优惠券名称"},on:{search:e.onSearch},model:{value:e.queryParam.search,callback:function(a){e.$set(e.queryParam,"search",a)},expression:"queryParam.search"}})],1)],1)],1),t("s-table",{ref:"table",attrs:{rowKey:"coupon_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"coupon_type",fn:function(a){return[t("a-tag",[e._v(e._s(e.CouponTypeEnum[a].name))])]}},{key:"min_price",fn:function(a){return[t("p",{staticClass:"c-p"},[e._v(e._s(a))])]}},{key:"discount",fn:function(a){return[10==a.coupon_type?[t("span",[e._v("立减")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.reduce_price))]),t("span",[e._v("元")])]:e._e(),20==a.coupon_type?[t("span",[e._v("打")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.discount))]),t("span",[e._v("折")])]:e._e()]}},{key:"duetime",fn:function(a){return[10==a.expire_type?[t("span",[e._v("领取")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.expire_day))]),t("span",[e._v("天内有效")])]:e._e(),20==a.expire_type?[t("span",[e._v(e._s(a.start_time)+" ~ "+e._s(a.end_time))])]:e._e()]}},{key:"status",fn:function(a){return[t("a-tag",{attrs:{color:a?"green":""}},[e._v(e._s(a?"显示":"隐藏"))])]}},{key:"action",fn:function(a){return t("span",{staticClass:"actions"},[e.$auth("/market/coupon/update")?t("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]):e._e(),t("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])])}}])})],1)},i=[],s=t("5530"),n=(t("d3b7"),t("b775")),o={list:"/market.coupon/list",detail:"/market.coupon/detail",receive:"/market.coupon/receive",add:"/market.coupon/add",edit:"/market.coupon/edit",delete:"/market.coupon/delete"};function l(e){return Object(n["b"])({url:o.list,method:"get",params:e})}function u(e){return Object(n["b"])({url:o.delete,method:"post",data:e})}var c=t("2af9"),d=t("8fa3"),m={name:"Index",components:{STable:c["c"]},data:function(){var e=this;return{queryParam:{},ApplyRangeEnum:d["a"],CouponTypeEnum:d["b"],ExpireTypeEnum:d["c"],isLoading:!1,columns:[{title:"优惠券ID",dataIndex:"coupon_id"},{title:"优惠券名称",dataIndex:"name"},{title:"优惠券类型",dataIndex:"coupon_type",scopedSlots:{customRender:"coupon_type"}},{title:"最低消费金额 (元)",dataIndex:"min_price",scopedSlots:{customRender:"min_price"}},{title:"优惠方式",scopedSlots:{customRender:"discount"}},{title:"已发放/领取数量",dataIndex:"receive_num"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(a){return l(Object(s["a"])(Object(s["a"])({},a),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleAdd:function(){this.$router.push("./create")},handleEdit:function(e){this.$router.push({path:"./update",query:{couponId:e.coupon_id}})},handleDelete:function(e){var a=this,t=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return u({couponId:e.coupon_id}).then((function(e){a.$message.success(e.message,1.5),a.handleRefresh()})).finally((function(e){t.destroy()}))}})},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)},onSearch:function(){this.handleRefresh(!0)}}},p=m,f=t("2877"),v=Object(f["a"])(p,r,i,!1,null,null,null);a["default"]=v.exports},"814e":function(e,a,t){},"88bc":function(e,a,t){(function(a){var t=1/0,r=9007199254740991,i="[object Arguments]",s="[object Function]",n="[object GeneratorFunction]",o="[object Symbol]",l="object"==typeof a&&a&&a.Object===Object&&a,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")();function d(e,a,t){switch(t.length){case 0:return e.call(a);case 1:return e.call(a,t[0]);case 2:return e.call(a,t[0],t[1]);case 3:return e.call(a,t[0],t[1],t[2])}return e.apply(a,t)}function m(e,a){var t=-1,r=e?e.length:0,i=Array(r);while(++t<r)i[t]=a(e[t],t,e);return i}function p(e,a){var t=-1,r=a.length,i=e.length;while(++t<r)e[i+t]=a[t];return e}var f=Object.prototype,v=f.hasOwnProperty,b=f.toString,_=c.Symbol,h=f.propertyIsEnumerable,g=_?_.isConcatSpreadable:void 0,C=Math.max;function w(e,a,t,r,i){var s=-1,n=e.length;t||(t=k),i||(i=[]);while(++s<n){var o=e[s];a>0&&t(o)?a>1?w(o,a-1,t,r,i):p(i,o):r||(i[i.length]=o)}return i}function y(e,a){return e=Object(e),x(e,a,(function(a,t){return t in e}))}function x(e,a,t){var r=-1,i=a.length,s={};while(++r<i){var n=a[r],o=e[n];t(o,n)&&(s[n]=o)}return s}function q(e,a){return a=C(void 0===a?e.length-1:a,0),function(){var t=arguments,r=-1,i=C(t.length-a,0),s=Array(i);while(++r<i)s[r]=t[a+r];r=-1;var n=Array(a+1);while(++r<a)n[r]=t[r];return n[a]=s,d(e,this,n)}}function k(e){return N(e)||V(e)||!!(g&&e&&e[g])}function S(e){if("string"==typeof e||T(e))return e;var a=e+"";return"0"==a&&1/e==-t?"-0":a}function V(e){return I(e)&&v.call(e,"callee")&&(!h.call(e,"callee")||b.call(e)==i)}var N=Array.isArray;function L(e){return null!=e&&D(e.length)&&!F(e)}function I(e){return O(e)&&L(e)}function F(e){var a=$(e)?b.call(e):"";return a==s||a==n}function D(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function $(e){var a=typeof e;return!!e&&("object"==a||"function"==a)}function O(e){return!!e&&"object"==typeof e}function T(e){return"symbol"==typeof e||O(e)&&b.call(e)==o}var E=q((function(e,a){return null==e?{}:y(e,m(w(a,1),S))}));e.exports=E}).call(this,t("c8ba"))},"8b41":function(e,a,t){"use strict";t("9865")},"8fa3":function(e,a,t){"use strict";t.d(a,"a",(function(){return i})),t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return s}));var r=t("5c06"),i=new r["a"]([{key:"ALL",name:"全部商品",value:10},{key:"SOME_GOODS",name:"指定商品",value:20}]),s=new r["a"]([{key:"RECEIVE",name:"领取后",value:10},{key:"FIXED_TIME",name:"固定时间",value:20}]),n=new r["a"]([{key:"FULL_DISCOUNT",name:"满减券",value:10},{key:"DISCOUNT",name:"折扣券",value:20}])},"915d":function(e,a,t){},"93c1":function(e,a,t){},9645:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("div",{staticClass:"table-operator"},[t("a-row",{staticClass:"row-item-search"},[t("a-form",{staticClass:"search-form",attrs:{form:e.searchForm,layout:"inline"},on:{submit:e.handleSearch}},[t("a-form-item",{attrs:{label:"优惠券名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["couponName"],expression:"['couponName']"}],attrs:{placeholder:"请输入优惠券名称"}})],1),t("a-form-item",{attrs:{label:"会员昵称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],attrs:{placeholder:"请输入会员昵称"}})],1),t("a-form-item",{attrs:{label:"领取时间"}},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime"],expression:"['betweenTime']"}],attrs:{format:"YYYY-MM-DD"}})],1),t("a-form-item",{staticClass:"search-btn"},[t("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("搜索")])],1)],1)],1)],1),t("s-table",{ref:"table",attrs:{rowKey:"user_coupon_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"user",fn:function(e){return[t("UserItem",{attrs:{user:e}})]}},{key:"coupon_type",fn:function(a){return[t("a-tag",[e._v(e._s(e.CouponTypeEnum[a].name))])]}},{key:"min_price",fn:function(a){return[t("p",{staticClass:"c-p"},[e._v(e._s(a))])]}},{key:"discount",fn:function(a){return[a.coupon_type==e.CouponTypeEnum.FULL_DISCOUNT.value?[t("span",[e._v("立减")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.reduce_price))]),t("span",[e._v("元")])]:e._e(),a.coupon_type==e.CouponTypeEnum.DISCOUNT.value?[t("span",[e._v("打")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.discount))]),t("span",[e._v("折")])]:e._e()]}},{key:"duetime",fn:function(a){return[10==a.expire_type?[t("span",[e._v("领取")]),t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.expire_day))]),t("span",[e._v("天内有效")])]:e._e(),20==a.expire_type?[t("span",[e._v(e._s(a.start_time)+" ~ "+e._s(a.end_time))])]:e._e()]}}])})],1)},i=[],s=t("5530"),n=t("39ad9"),o=t("ab09"),l=t("8fa3"),u={name:"Index",components:{STable:o["c"],UserItem:o["d"]},data:function(){var e=this;return{searchForm:this.$form.createForm(this),queryParam:{},CouponTypeEnum:l["b"],isLoading:!1,columns:[{title:"ID",dataIndex:"user_coupon_id"},{title:"会员信息",dataIndex:"user",scopedSlots:{customRender:"user"}},{title:"优惠券名称",dataIndex:"name"},{title:"优惠券类型",dataIndex:"coupon_type",scopedSlots:{customRender:"coupon_type"}},{title:"最低消费金额 (元)",dataIndex:"min_price",scopedSlots:{customRender:"min_price"}},{title:"优惠方式",scopedSlots:{customRender:"discount"}},{title:"有效期",scopedSlots:{customRender:"duetime"}},{title:"领取时间",dataIndex:"create_time"}],loadData:function(a){return n["f"](Object(s["a"])(Object(s["a"])({},a),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)},handleSearch:function(e){var a=this;e.preventDefault(),this.searchForm.validateFields((function(e,t){e||(a.queryParam=Object(s["a"])(Object(s["a"])({},a.queryParam),t),a.handleRefresh(!0))}))}}},c=u,d=t("2877"),m=Object(d["a"])(c,r,i,!1,null,null,null);a["default"]=m.exports},9656:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("div",{staticClass:"table-operator"},[t("a-row",[t("a-col",{attrs:{span:6}},[e.$auth("/market/seckill/create")?t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]):e._e()],1),t("a-col",{attrs:{span:8,offset:10}},[t("a-input-search",{staticStyle:{"max-width":"300px","min-width":"150px",float:"right"},attrs:{placeholder:"请输入限时秒杀商品名称"},on:{search:e.onSearch},model:{value:e.queryParam.search,callback:function(a){e.$set(e.queryParam,"search",a)},expression:"queryParam.search"}})],1)],1)],1),t("s-table",{ref:"table",attrs:{rowKey:"seckill_id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"duetime",fn:function(a){return[[t("span",[e._v(e._s(a.start_time)+" ~ "+e._s(a.end_time))])]]}},{key:"seckil_price",fn:function(a){return[t("span",{staticClass:"c-p mlr-2"},[e._v(e._s(a.seckill_price_array.seckill_price_min)+"~"+e._s(a.seckill_price_array.seckill_price_max))]),t("span",[e._v("元")])]}},{key:"status",fn:function(a){return[t("a-tag",{attrs:{color:a?"green":""}},[e._v(e._s(a?"显示":"隐藏"))])]}},{key:"action",fn:function(a){return t("span",{staticClass:"actions"},[e.$auth("/market/seckill/update")?t("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]):e._e(),t("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])])}}])})],1)},i=[],s=t("5530"),n=(t("d3b7"),t("3008")),o=t("2af9"),l=t("c8ce"),u={name:"Index",components:{STable:o["c"]},data:function(){var e=this;return{queryParam:{},ApplyRangeEnum:l["a"],SeckillTypeEnum:l["d"],ExpireTypeEnum:l["c"],isLoading:!1,columns:[{title:"秒杀ID",dataIndex:"seckill_id"},{title:"商品名称",dataIndex:"goods_name"},{title:"秒杀时间范围",scopedSlots:{customRender:"duetime"}},{title:"秒杀价格",scopedSlots:{customRender:"seckil_price"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"添加时间",dataIndex:"create_time"},{title:"操作",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(a){return n["e"](Object(s["a"])(Object(s["a"])({},a),e.queryParam)).then((function(e){return e.data.list}))}}},created:function(){},methods:{handleAdd:function(){this.$router.push("./create")},handleEdit:function(e){this.$router.push({path:"./update",query:{seckillId:e.seckill_id}})},handleDelete:function(e){var a=this,t=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return n["b"]({seckillId:e.seckill_id}).then((function(e){a.$message.success(e.message,1.5),a.handleRefresh()})).finally((function(e){t.destroy()}))}})},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)},onSearch:function(){this.handleRefresh(!0)}}},c=u,d=t("2877"),m=Object(d["a"])(c,r,i,!1,null,null,null);a["default"]=m.exports},9736:function(e,a,t){"use strict";t("fb3f")},9865:function(e,a,t){},a8a6:function(e,a,t){"use strict";t("cef7")},bf3e:function(e,a,t){},c24e:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"优惠券名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:2,message:"请输入至少2个字符"}]}],expression:"['name', { rules: [{ required: true, min: 2, message: '请输入至少2个字符' }] }]"}],attrs:{placeholder:"请输入优惠券名称"}})],1),t("a-form-item",{attrs:{label:"优惠券类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["coupon_type",{initialValue:10,rules:[{required:!0}]}],expression:"['coupon_type', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("满减券")]),t("a-radio",{attrs:{value:20}},[e._v("折扣券")])],1)],1),10==e.form.getFieldValue("coupon_type")?t("a-form-item",{attrs:{label:"减免金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["reduce_price",{rules:[{required:!0,message:"请输入减免金额"}]}],expression:"['reduce_price', { rules: [{ required: true, message: '请输入减免金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-5"},[e._v("元")])],1):e._e(),20==e.form.getFieldValue("coupon_type")?t("a-form-item",{attrs:{label:"折扣率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{initialValue:9.9,rules:[{required:!0,message:"请输入折扣率"}]}],expression:"['discount', { initialValue: 9.9, rules: [{ required: true, message: '请输入折扣率' }] }]"}],attrs:{min:0,max:9.9,precision:1}}),t("span",{staticClass:"ml-5"},[e._v("%")]),t("p",{staticClass:"form-item-help"},[t("small",[e._v("折扣率范围 0-9.9，8代表打8折，0代表不折扣")])])],1):e._e(),t("a-form-item",{attrs:{label:"最低消费金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_price",{rules:[{required:!0,message:"请输入最低消费金额"}]}],expression:"['min_price', { rules: [{ required: true, message: '请输入最低消费金额' }] }]"}],attrs:{min:.01,precision:2}}),t("span",{staticClass:"ml-5"},[e._v("元")])],1),t("a-form-item",{attrs:{label:"到期类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_type",{initialValue:10,rules:[{required:!0}]}],expression:"['expire_type', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("领取后生效")]),t("a-radio",{attrs:{value:20}},[e._v("固定时间")])],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:10==e.form.getFieldValue("expire_type"),expression:"form.getFieldValue('expire_type') == 10"}],staticClass:"expire_type-10"},[t("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_day",{initialValue:7,rules:[{required:!0,message:"请输入有效期天数"}]}],expression:"['expire_day', { initialValue: 7, rules: [{ required: true, message: '请输入有效期天数' }] }]"}],attrs:{addonBefore:"有效期",addonAfter:"天",inputProps:{min:1,precision:0}}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:20==e.form.getFieldValue("expire_type"),expression:"form.getFieldValue('expire_type') == 20"}],staticClass:"expire_type-20"},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime",{initialValue:e.defaultDate,rules:[{required:!0,message:"请选择有效期范围"}]}],expression:"['betweenTime', { initialValue: defaultDate, rules: [{ required: true, message: '请选择有效期范围' }] }]"}],attrs:{format:"YYYY-MM-DD"}})],1)],1),t("a-form-item",{attrs:{label:"券适用范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range",{initialValue:10,rules:[{required:!0}]}],expression:"['apply_range', { initialValue: 10, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:10}},[e._v("全场通用")]),t("a-radio",{attrs:{value:20}},[e._v("指定商品")])],1),20==e.form.getFieldValue("apply_range")?t("a-form-item",[t("SelectGoods",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range_config.applyGoodsIds",{initialValue:[],rules:[{required:!0,message:"请选择指定的商品"}]}],expression:"['apply_range_config.applyGoodsIds', { initialValue: [], rules: [{ required: true, message: '请选择指定的商品' }] }]"}],attrs:{defaultList:e.containGoodsList}})],1):e._e()],1),t("a-form-item",{attrs:{label:"发放总数量",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["total_num",{initialValue:-1,rules:[{required:!0,message:"请输入发放总数量"}]}],expression:"['total_num', { initialValue: -1, rules: [{ required: true, message: '请输入发放总数量' }] }]"}],attrs:{min:-1,precision:0}}),t("span",{staticClass:"ml-5"},[e._v("张")]),t("p",{staticClass:"form-item-help"},[t("small",[e._v("发放的优惠券总数量，-1为不限制")])])],1),t("a-form-item",{attrs:{label:"显示状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', { initialValue: 1, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("显示")]),t("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1),t("p",{staticClass:"form-item-help"},[t("small",[e._v("如果设为隐藏将不会展示在用户端页面")])])],1),t("a-form-item",{attrs:{label:"优惠券描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"['describe']"}],attrs:{autoSize:{minRows:4}}})],1),t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules:[{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1),t("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],s=(t("d3b7"),t("c1df")),n=t.n(s),o=t("39ad9"),l=t("2af9"),u=t("8fa3"),c={components:{SelectGoods:l["d"],InputNumberGroup:l["b"]},data:function(){return{ApplyRangeEnum:u["a"],CouponTypeEnum:u["b"],ExpireTypeEnum:u["c"],isLoading:!1,isBtnLoading:!1,labelCol:{span:3},wrapperCol:{span:10},form:this.$form.createForm(this),defaultDate:[n()(),n()()],containGoodsList:[]}},created:function(){var e=this;this.$nextTick((function(){e.$forceUpdate()}))},methods:{handleSubmit:function(e){e.preventDefault();var a=this.form.validateFields,t=this.onFormSubmit;a((function(e,a){!e&&t(a)}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,this.isBtnLoading=!0,o["a"]({form:e}).then((function(e){a.$message.success(e.message,1.5),setTimeout((function(){a.$router.push("./index")}),1500)})).catch((function(){a.isBtnLoading=!1})).finally((function(e){a.isLoading=!1}))}}},d=c,m=(t("8b41"),t("2877")),p=Object(m["a"])(d,r,i,!1,null,"1f52af45",null);a["default"]=p.exports},c561:function(e,a,t){"use strict";t("814e")},c8ce:function(e,a,t){"use strict";t.d(a,"a",(function(){return i})),t.d(a,"d",(function(){return n})),t.d(a,"c",(function(){return s}));var r=t("5c06"),i=new r["a"]([{key:"ALL",name:"全部商品",value:10},{key:"SOME_GOODS",name:"指定商品",value:20}]),s=new r["a"]([{key:"RECEIVE",name:"领取后",value:10},{key:"FIXED_TIME",name:"固定时间",value:20}]),n=new r["a"]([{key:"FULL_DISCOUNT",name:"限时秒杀",value:10},{key:"DISCOUNT",name:"实时秒杀",value:20}])},ca5c:function(e,a,t){},cc4a:function(e,a,t){"use strict";t("915d")},cef7:function(e,a,t){},da13:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"积分名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["points_name",{rules:[{required:!0,message:"请输入积分名称"}]}],expression:"['points_name', { rules: [{ required: true, message: '请输入积分名称' }] }]"}]}),t("div",{staticClass:"form-item-help"},[t("small",[e._v("注：商家使用自定义的积分名称来做品牌运营。如京东把积分称为“京豆”，淘宝把积分称为“淘金币”")])])],1),t("a-form-item",{attrs:{label:"积分说明",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{rules:[{required:!0,message:"请输入积分说明"}]}],expression:"['describe', { rules: [{ required: true, message: '请输入积分说明' }] }]"}],attrs:{autoSize:{minRows:4}}})],1),t("a-divider",{attrs:{orientation:"left"}},[e._v("积分赠送")]),t("a-form-item",{attrs:{label:"购物送积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_shopping_gift",{initialValue:1,rules:[{required:!0}]}],expression:"['is_shopping_gift', { initialValue: 1, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("开启")]),t("a-radio",{attrs:{value:0}},[e._v("关闭")])],1),t("div",{staticClass:"form-item-help"},[t("small",[e._v("积分赠送规则：1. 订单确认收货已完成； 2. 已完成订单超出后台设置的申请售后期限")])])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.form.getFieldValue("is_shopping_gift"),expression:"form.getFieldValue('is_shopping_gift') == 1"}]},[t("a-form-item",{attrs:{label:"积分赠送比例",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["gift_ratio",{rules:[{required:!0,message:"请输入积分赠送比例"}]}],expression:"['gift_ratio', { rules: [{ required: true, message: '请输入积分赠送比例' }] }]"}],attrs:{min:.1,max:100,precision:1}}),t("span",{staticClass:"ml-10"},[e._v("%")]),t("div",{staticClass:"form-item-help"},[t("p",{staticClass:"extra"},[e._v("注：赠送比例请填写数字0~100；订单的运费不参与积分赠送")]),t("p",{staticClass:"extra"},[e._v("例：订单付款金额(100.00元) * 积分赠送比例(100%) = 实际赠送的积分(100积分)")])])],1)],1),t("a-divider",{attrs:{orientation:"left"}},[e._v("积分抵扣")]),t("a-form-item",{attrs:{label:"下单使用积分抵扣",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_shopping_discount",{initialValue:1,rules:[{required:!0}]}],expression:"['is_shopping_discount', { initialValue: 1, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("开启")]),t("a-radio",{attrs:{value:0}},[e._v("关闭")])],1),t("div",{staticClass:"form-item-help"},[t("small",[e._v("注：如开启则用户下单时可选择使用积分抵扣订单金额")])])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.form.getFieldValue("is_shopping_discount"),expression:"form.getFieldValue('is_shopping_discount') == 1"}]},[t("a-form-item",{attrs:{label:"积分抵扣比例",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount.discount_ratio",{rules:[{required:!0,message:"积分抵扣比例不能为空"}]}],expression:"['discount.discount_ratio', { rules: [{ required: true, message: '积分抵扣比例不能为空' }] }]"}],attrs:{addonBefore:"1个积分可抵扣",addonAfter:"元",inputProps:{min:.01,precision:2}}}),t("div",{staticClass:"form-item-help"},[t("small",[e._v("例如：设置1个积分可抵扣0.1元，则10积分可抵扣1元，100积分可抵扣10元")])])],1),t("a-form-item",{attrs:{label:"最高可抵扣金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-form-item",[t("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount.full_order_price",{rules:[{required:!0,message:"抵扣条件不能为空"}]}],expression:"['discount.full_order_price', { rules: [{ required: true, message: '抵扣条件不能为空' }] }]"}],attrs:{addonBefore:"订单满",addonAfter:"元",inputProps:{min:.01,precision:2}}})],1),t("a-form-item",[t("InputNumberGroup",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount.max_money_ratio",{rules:[{required:!0,message:"最高可抵扣金额不能为空"}]}],expression:"['discount.max_money_ratio', { rules: [{ required: true, message: '最高可抵扣金额不能为空' }] }]"}],attrs:{addonBefore:"最高可抵扣金额",addonAfter:"%",inputProps:{min:.1,max:90,precision:1}}}),t("div",{staticClass:"form-item-help"},[t("small",[e._v("例如：设置最高可抵扣10%，订单金额100元，此时用户可抵扣10元")])])],1)],1)],1),t("a-form-item",{attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)},i=[],s=(t("d3b7"),t("ddb0"),t("88bc")),n=t.n(s),o=t("f585"),l=t("2af9"),u={components:{InputNumberGroup:l["b"]},data:function(){return{key:"points",labelCol:{span:4},wrapperCol:{span:10},isLoading:!1,form:this.$form.createForm(this),record:{}}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.isLoading=!0,o["a"](this.key).then((function(a){e.record=a.data.values,e.setFieldsValue()})).finally((function(a){e.isLoading=!1}))},setFieldsValue:function(){var e=this.record,a=this.$nextTick,t=this.form.setFieldsValue;a((function(){t(n()(e,["points_name","describe","is_shopping_gift","gift_ratio","is_shopping_discount","discount"]))}))},handleSubmit:function(e){var a=this;e.preventDefault();var t=this.form.validateFields;t((function(e,t){!e&&a.onFormSubmit(t)}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,o["b"](this.key,{form:e}).then((function(e){a.$message.success(e.message,1.5)})).finally((function(e){a.isLoading=!1}))}}},c=u,d=(t("cc4a"),t("2877")),m=Object(d["a"])(c,r,i,!1,null,"c1674690",null);a["default"]=m.exports},f076:function(e,a,t){},f1fa:function(e,a,t){},f244:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("a-spin",{attrs:{spinning:e.isLoading}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"秒杀范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-form-item",[t("SelectGoodsSku",{directives:[{name:"decorator",rawName:"v-decorator",value:["apply_range_config.applyGoodsIds",{initialValue:[],rules:[{required:!0,message:"请选择指定的商品"}]}],expression:"['apply_range_config.applyGoodsIds', { initialValue: [], rules: [{ required: true, message: '请选择指定的商品' }] }]"}],attrs:{defaultList:e.containGoodsList}})],1)],1),t("a-form-item",{attrs:{label:"到期类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-form-item",{staticClass:"expire_type-20"},[t("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["betweenTime",{initialValue:e.defaultDate,rules:[{required:!0,message:"请选择有效期范围"}]}],expression:"['betweenTime', { initialValue: defaultDate, rules: [{ required: true, message: '请选择有效期范围' }] }]"}],attrs:{showTime:{defaultValue:[e.moment("00:00:00","HH:mm:ss"),e.moment("23:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"}})],1)],1),t("a-form-item",{attrs:{label:"显示状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1,rules:[{required:!0}]}],expression:"['status', { initialValue: 1, rules: [{ required: true }] }]"}]},[t("a-radio",{attrs:{value:1}},[e._v("显示")]),t("a-radio",{attrs:{value:0}},[e._v("隐藏")])],1),t("p",{staticClass:"form-item-help"},[t("small",[e._v("如果设为隐藏将不会展示在用户端页面")])])],1),t("a-form-item",{attrs:{label:"秒杀描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe"],expression:"['describe']"}],attrs:{autoSize:{minRows:4}}})],1),t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol,extra:"数字越小越靠前"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100,rules:[{required:!0,message:"请输入排序值"}]}],expression:"['sort', {initialValue: 100, rules:[{required: true, message: '请输入排序值'}]}]"}],attrs:{min:0}})],1),t("a-form-item",{staticClass:"mt-20",attrs:{"wrapper-col":{span:e.wrapperCol.span,offset:e.labelCol.span}}},[t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.isBtnLoading}},[e._v("提交")])],1)],1)],1)],1)},i=[],s=(t("d3b7"),t("c1df")),n=t.n(s),o=t("3008"),l=t("2af9"),u=t("c8ce"),c={components:{SelectGoodsSku:l["f"],InputNumberGroup:l["b"]},data:function(){return{ApplyRangeEnum:u["a"],SeckillTypeEnum:u["d"],ExpireTypeEnum:u["c"],isLoading:!1,isBtnLoading:!1,labelCol:{span:3},wrapperCol:{span:10},form:this.$form.createForm(this),defaultDate:[n()(),n()()],containGoodsList:[]}},created:function(){var e=this;this.$nextTick((function(){e.$forceUpdate()}))},methods:{moment:n.a,handleSubmit:function(e){e.preventDefault();var a=this.form.validateFields,t=this.onFormSubmit;a((function(e,a){!e&&t(a)}))},onFormSubmit:function(e){var a=this;this.isLoading=!0,this.isBtnLoading=!0,o["a"]({form:e}).then((function(e){a.$message.success(e.message,1.5),setTimeout((function(){a.$router.push("./index")}),1500)})).catch((function(){a.isBtnLoading=!1})).finally((function(e){a.isLoading=!1}))}}},d=c,m=(t("2090"),t("2877")),p=Object(m["a"])(d,r,i,!1,null,"98af9c76",null);a["default"]=p.exports},f585:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return o}));var r=t("5530"),i=t("b775"),s={detail:"/setting/detail",update:"/setting/update"};function n(e){return Object(i["b"])({url:s.detail,method:"get",params:{key:e}})}function o(e,a){return Object(i["b"])({url:s.update,method:"post",data:Object(r["a"])({key:e},a)})}},fb3f:function(e,a,t){},fe7e:function(e,a,t){"use strict";var r=t("5c06");a["a"]=new r["a"]([{key:"RECHARGE",name:"用户充值",value:10},{key:"CONSUME",name:"用户消费",value:20},{key:"ADMIN",name:"管理员操作",value:30},{key:"REFUND",name:"订单退款",value:40}])}}]);
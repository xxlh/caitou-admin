(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["store"],{"1da1":function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));t("d3b7");function n(e,a,t,n,r,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?a(s):Promise.resolve(s).then(n,r)}function r(e){return function(){var a=this,t=arguments;return new Promise((function(r,o){var i=e.apply(a,t);function l(e){n(i,r,o,l,s,"next",e)}function s(e){n(i,r,o,l,s,"throw",e)}l(void 0)}))}}},"4d55":function(e,a,t){"use strict";t.d(a,"e",(function(){return o})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return l})),t.d(a,"d",(function(){return s})),t.d(a,"c",(function(){return c}));t("ac1f"),t("5319");var n=t("b775"),r={list:"/stores",all:"/stores",add:"/stores",edit:"/stores/{id}",delete:"/stores/{id}"};function o(e){return Object(n["b"])({url:r.list,method:"get",params:e})}function i(e){return Object(n["b"])({url:r.all,method:"get",params:e})}function l(e){return Object(n["b"])({url:r.add,method:"post",data:e})}function s(e,a){return Object(n["b"])({url:r.edit.replace("{id}",e),method:"patch",data:a})}function c(e){return Object(n["b"])({url:r.delete.replace("{id}",e),method:"delete"})}},7931:function(e,a,t){"use strict";t("88fd")},"862d3":function(e,a,t){"use strict";(function(a,t){e.exports=t()})(0,(function(){function e(e){var n=[];return e.AMapUI&&n.push(a(e.AMapUI)),e.Loca&&n.push(t(e.Loca)),Promise.all(n)}function a(e){return new Promise((function(a,t){var l=[];if(e.plugins)for(var s=0;s<e.plugins.length;s+=1)-1==r.AMapUI.plugins.indexOf(e.plugins[s])&&l.push(e.plugins[s]);if(o.AMapUI===n.failed)t("前次请求 AMapUI 失败");else if(o.AMapUI===n.notload){o.AMapUI=n.loading,r.AMapUI.version=e.version||r.AMapUI.version,s=r.AMapUI.version;var c=document.body||document.head,d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/ui/"+s+"/main.js",d.onerror=function(e){o.AMapUI=n.failed,t("请求 AMapUI 失败")},d.onload=function(){if(o.AMapUI=n.loaded,l.length)window.AMapUI.loadUI(l,(function(){for(var e=0,t=l.length;e<t;e++){var n=l[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}for(a();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()}));else for(a();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()},c.appendChild(d)}else o.AMapUI===n.loaded?e.version&&e.version!==r.AMapUI.version?t("不允许多个版本 AMapUI 混用"):l.length?window.AMapUI.loadUI(l,(function(){for(var e=0,t=l.length;e<t;e++){var n=l[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}a()})):a():e.version&&e.version!==r.AMapUI.version?t("不允许多个版本 AMapUI 混用"):i.AMapUI.push((function(e){e?t(e):l.length?window.AMapUI.loadUI(l,(function(){for(var e=0,t=l.length;e<t;e++){var n=l[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}a()})):a()}))}))}function t(e){return new Promise((function(a,t){if(o.Loca===n.failed)t("前次请求 Loca 失败");else if(o.Loca===n.notload){o.Loca=n.loading,r.Loca.version=e.version||r.Loca.version;var l=r.Loca.version,s=r.AMap.version.startsWith("2"),c=l.startsWith("2");if(s&&!c||!s&&c)t("JSAPI 与 Loca 版本不对应！！");else{s=r.key,c=document.body||document.head;var d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/loca?v="+l+"&key="+s,d.onerror=function(e){o.Loca=n.failed,t("请求 AMapUI 失败")},d.onload=function(){for(o.Loca=n.loaded,a();i.Loca.length;)i.Loca.splice(0,1)[0]()},c.appendChild(d)}}else o.Loca===n.loaded?e.version&&e.version!==r.Loca.version?t("不允许多个版本 Loca 混用"):a():e.version&&e.version!==r.Loca.version?t("不允许多个版本 Loca 混用"):i.Loca.push((function(e){e?t(e):t()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(n||(n={}));var r={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},i={AMap:[],AMapUI:[],Loca:[]},l=[],s=function(e){"function"==typeof e&&(o.AMap===n.loaded?e(window.AMap):l.push(e))};return{load:function(a){return new Promise((function(t,i){if(o.AMap==n.failed)i("");else if(o.AMap==n.notload){var c=a.key,d=a.version,u=a.plugins;c?(window.AMap&&"lbs.amap.com"!==location.host&&i("禁止多种API加载方式混用"),r.key=c,r.AMap.version=d||r.AMap.version,r.AMap.plugins=u||r.AMap.plugins,o.AMap=n.loading,d=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)o.AMap=n.failed,i(r);else for(o.AMap=n.loaded,e(a).then((function(){t(window.AMap)}))["catch"](i);l.length;)l.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+r.AMap.version+"&key="+c+"&plugin="+r.AMap.plugins.join(","),u.onerror=function(e){o.AMap=n.failed,i(e)},d.appendChild(u)):i("请填写key")}else if(o.AMap==n.loaded)if(a.key&&a.key!==r.key)i("多个不一致的 key");else if(a.version&&a.version!==r.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(c=[],a.plugins)for(d=0;d<a.plugins.length;d+=1)-1==r.AMap.plugins.indexOf(a.plugins[d])&&c.push(a.plugins[d]);c.length?window.AMap.plugin(c,(function(){e(a).then((function(){t(window.AMap)}))["catch"](i)})):e(a).then((function(){t(window.AMap)}))["catch"](i)}else if(a.key&&a.key!==r.key)i("多个不一致的 key");else if(a.version&&a.version!==r.AMap.version)i("不允许多个版本 JSAPI 混用");else{var p=[];if(a.plugins)for(d=0;d<a.plugins.length;d+=1)-1==r.AMap.plugins.indexOf(a.plugins[d])&&p.push(a.plugins[d]);s((function(){p.length?window.AMap.plugin(p,(function(){e(a).then((function(){t(window.AMap)}))["catch"](i)})):e(a).then((function(){t(window.AMap)}))["catch"](i)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,r={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},i={AMap:[],AMapUI:[],Loca:[]}}}}))},"88bc":function(e,a,t){(function(a){var t=1/0,n=9007199254740991,r="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",l="[object Symbol]",s="object"==typeof a&&a&&a.Object===Object&&a,c="object"==typeof self&&self&&self.Object===Object&&self,d=s||c||Function("return this")();function u(e,a,t){switch(t.length){case 0:return e.call(a);case 1:return e.call(a,t[0]);case 2:return e.call(a,t[0],t[1]);case 3:return e.call(a,t[0],t[1],t[2])}return e.apply(a,t)}function p(e,a){var t=-1,n=e?e.length:0,r=Array(n);while(++t<n)r[t]=a(e[t],t,e);return r}function f(e,a){var t=-1,n=a.length,r=e.length;while(++t<n)e[r+t]=a[t];return e}var m=Object.prototype,h=m.hasOwnProperty,v=m.toString,g=d.Symbol,b=m.propertyIsEnumerable,w=g?g.isConcatSpreadable:void 0,M=Math.max;function A(e,a,t,n,r){var o=-1,i=e.length;t||(t=k),r||(r=[]);while(++o<i){var l=e[o];a>0&&t(l)?a>1?A(l,a-1,t,n,r):f(r,l):n||(r[r.length]=l)}return r}function y(e,a){return e=Object(e),C(e,a,(function(a,t){return t in e}))}function C(e,a,t){var n=-1,r=a.length,o={};while(++n<r){var i=a[n],l=e[i];t(l,i)&&(o[i]=l)}return o}function _(e,a){return a=M(void 0===a?e.length-1:a,0),function(){var t=arguments,n=-1,r=M(t.length-a,0),o=Array(r);while(++n<r)o[n]=t[a+n];n=-1;var i=Array(a+1);while(++n<a)i[n]=t[n];return i[a]=o,u(e,this,i)}}function k(e){return S(e)||I(e)||!!(w&&e&&e[w])}function x(e){if("string"==typeof e||P(e))return e;var a=e+"";return"0"==a&&1/e==-t?"-0":a}function I(e){return j(e)&&h.call(e,"callee")&&(!b.call(e,"callee")||v.call(e)==r)}var S=Array.isArray;function L(e){return null!=e&&O(e.length)&&!U(e)}function j(e){return F(e)&&L(e)}function U(e){var a=q(e)?v.call(e):"";return a==o||a==i}function O(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function q(e){var a=typeof e;return!!e&&("object"==a||"function"==a)}function F(e){return!!e&&"object"==typeof e}function P(e){return"symbol"==typeof e||F(e)&&v.call(e)==l}var $=_((function(e,a){return null==e?{}:y(e,p(A(a,1),x))}));e.exports=$}).call(this,t("c8ba"))},"88fd":function(e,a,t){},f30f:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"card-title"},[e._v(e._s(e.$route.meta.title))]),t("div",{staticClass:"table-operator"},[t("a-row",[t("a-col",{attrs:{span:5}},[t("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),t("a-col",{staticClass:"flex flex-x-end",attrs:{span:11,offset:8}},[t("a-select",{staticStyle:{width:"220px","margin-right":"20px"},attrs:{placeholder:"请选择地址类型"},model:{value:e.queryParam.type,callback:function(a){e.$set(e.queryParam,"type",a)},expression:"queryParam.type"}},[t("a-select-option",{attrs:{value:0}},[e._v("全部")]),t("a-select-option",{attrs:{value:10}},[e._v("发货地址")]),t("a-select-option",{attrs:{value:20}},[e._v("退货地址")])],1),t("a-input-search",{staticStyle:{"max-width":"300px","min-width":"150px"},attrs:{placeholder:"请输入姓名/联系电话"},on:{search:e.onSearch},model:{value:e.queryParam.search,callback:function(a){e.$set(e.queryParam,"search",a)},expression:"queryParam.search"}})],1)],1)],1),t("s-table",{ref:"table",attrs:{rowKey:"id",loading:e.isLoading,columns:e.columns,data:e.loadData,pageSize:15},scopedSlots:e._u([{key:"full_address",fn:function(a){return t("span",{},[t("p",{staticClass:"twoline-hide",staticStyle:{width:"270px"}},[e._v(e._s(a))])])}},{key:"action",fn:function(a,n){return t("span",{},[t("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],staticStyle:{"margin-right":"8px"},on:{click:function(a){return e.handleEdit(n)}}},[e._v("编辑")]),t("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(a){return e.handleDelete(n)}}},[e._v("删除")])])}}])}),t("AddForm",{ref:"AddForm",on:{handleSubmit:e.handleRefresh}}),t("EditForm",{ref:"EditForm",on:{handleSubmit:e.handleRefresh}})],1)},r=[],o=t("5530"),i=(t("d3b7"),t("4d55")),l=t("2af9"),s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.title,width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"仓储名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入仓储名称"}]}],expression:"['name', {rules: [{required: true, message: '请输入仓储名称'}]}]"}]})],1),t("a-form-item",{attrs:{label:"联系人姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contact_name",{rules:[{required:!0,message:"请输入联系人姓名"}]}],expression:"['contact_name', {rules: [{required: true, message: '请输入联系人姓名'}]}]"}]})],1),t("a-form-item",{attrs:{label:"联系电话",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contact_phone",{rules:[{required:!0,message:"请输入联系电话"}]}],expression:"['contact_phone', {rules: [{required: true, message: '请输入联系电话'}]}]"}]})],1),t("a-form-item",{attrs:{label:"选择地区",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("SelectRegion",{directives:[{name:"decorator",rawName:"v-decorator",value:["cascader",{rules:[{required:!0,message:"请选择省市区"}]}],expression:"['cascader', {rules: [{required: true, message: '请选择省市区'}]}]"}],attrs:{placeholder:"请选择省市区"},on:{change:e.onCascaderChange}})],1),t("a-form-item",{attrs:{label:"地图选点",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.lng)+", "+e._s(e.lat)+" "),t("a-button",{attrs:{type:"primary"},on:{click:e.openSelectMap}},[e._v("打开地图选择位置")]),t("SelectMapPoint",{ref:"SelectMap",attrs:{lng:e.lng,lat:e.lat},on:{complete:e.onSelectMap},model:{value:e.showMap,callback:function(a){e.showMap=a},expression:"showMap"}})],1),t("a-form-item",{attrs:{label:"详细地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"请输入详细地址"}]}],expression:"['address', {rules: [{required: true, message: '请输入详细地址'}]}]"}]})],1),t("a-form-item",{attrs:{label:"所属区域",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["area_id",{rules:[{required:!1}]}],expression:"['area_id', {rules: [{required: false}]}]"}],attrs:{options:e.areas}})],1)],1)],1)],1)},c=[],d=t("1da1"),u=t("3835"),p=(t("96cf"),t("d81d"),t("b0c0"),t("99af"),t("b775")),f={list:"/areas"};function m(e){return Object(p["b"])({url:f.list,method:"get",params:e})}var h=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{visible:e.value,title:"请点击地图选择对应位置",forceRender:!0,"wrap-class-name":"full-modal",width:"100%"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{attrs:{id:"map"}})])},v=[],g=(t("3b18"),t("f64c")),b=t("4d91"),w=t("862d3"),M=t.n(w),A={name:"SelectMapPoint",model:{prop:"value",event:"change"},props:{value:b["a"].bool.def(),lng:b["a"].any.def(),lat:b["a"].any.def()},data:function(){return{AMap:null,map:{},marker:null,city:null,longitude:null,latitude:null,address:null}},created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return window._AMapSecurityConfig={securityJsCode:"cc376bf07ec7a861cbfada9c7de5b86f"},a.next=3,M.a.load({key:"8eed729112431178d5b9adaff42b33c1",version:"2.0",plugins:["AMap.PolygonEditor"]});case 3:e.AMap=a.sent,e.map=new e.AMap.Map("map",{}),e.city&&e.map.setCity(e.city),e.map.on("click",(function(a){e.marker&&e.map.remove(e.marker),e.longitude=a.lnglat.getLng(),e.latitude=a.lnglat.getLat(),e.marker=new e.AMap.Marker({position:new e.AMap.LngLat(e.longitude,e.latitude)}),e.map.add(e.marker)})),e.lng&&e.lat&&(e.marker&&e.map.remove(e.marker),e.marker=new e.AMap.Marker({position:new e.AMap.LngLat(e.lng,e.lat)}),e.map.add(e.marker));case 8:case"end":return a.stop()}}),a)})))()},methods:{onOpen:function(e){map&&(this.city=e.city||this.city,this.lng=e.lng||this.lng,this.lat=e.lat||this.lat,this.city&&this.map.setCity(this.city),this.lng&&this.lat?(this.marker&&this.map.remove(this.marker),this.marker=new this.AMap.Marker({position:new this.AMap.LngLat(this.lng,this.lat)}),this.map.add(this.marker)):this.marker&&this.map.remove(this.marker))},handleOk:function(e){var a=this;if(!this.longitude||!this.latitude)return g["a"].error("请先点击地图选择点",3),!1;this.AMap||g["a"].error("地图尚未初始化，请稍后或刷新重试",3),this.AMap.plugin("AMap.Geocoder",(function(){var e=new a.AMap.Geocoder({});e.getAddress([a.longitude,a.latitude],(function(e,t){if("complete"===e&&"OK"===t.info){var n,r,o=null===t||void 0===t||null===(n=t.regeocode)||void 0===n?void 0:n.addressComponent;a.address=o.township+o.street+o.streetNumber,a.address||(a.address=null===t||void 0===t||null===(r=t.regeocode)||void 0===r?void 0:r.formattedAddress)}a.$emit("change",!1),a.$emit("complete",{lng:a.longitude,lat:a.latitude,address:a.address})}))}))},handleCancel:function(e){this.$emit("change",!1)}}},y=A,C=(t("7931"),t("2877")),_=Object(C["a"])(y,h,v,!1,null,"2abd4e50",null),k=_.exports,x={components:{SelectRegion:l["h"],SelectMapPoint:k},data:function(){return{title:"新增地址",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),showMap:!1,lng:null,lat:null,areas:[],province:""}},created:function(){var e=this;m({per_page:100}).then((function(a){e.areas=a.data.map((function(e){return{value:e.id,label:e.name||"".concat(e.province,"_").concat(e.id)}}))}))},methods:{add:function(){this.visible=!0},handleSubmit:function(e){var a=this;e.preventDefault();var t=this.form.validateFields;t((function(e,t){!e&&a.onFormSubmit(t)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var a=this;this.confirmLoading=!0;var t=Object(u["a"])(e.cascader,3),n=t[0],r=t[1],l=t[2];delete e.cascader,i["a"](Object(o["a"])(Object(o["a"])({},e),{},{province:n,city:r,district:l,longitude:this.lng,latitude:this.lat})).then((function(t){a.$message.success("创建成功",1.5),a.handleCancel(),a.$emit("handleSubmit",e)})).finally((function(){a.confirmLoading=!1}))},openSelectMap:function(){this.showMap=!0;var e=this.form,a=(e.setFieldsValue,e.getFieldsValue),t=a();this.$refs.SelectMap.onOpen({city:t.cascader[1]||t.cascader[0],lng:this.lng,lat:this.lat})},onSelectMap:function(e){var a=this.form,t=a.setFieldsValue,n=a.getFieldsValue;this.lng=e.lng,this.lat=e.lat;var r=n();r.address||(r.address=e.address,t(r))},onCascaderChange:function(e){var a=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n="",e.length&&(n=e[0]),n==a.province){t.next=8;break}return t.next=5,m({province:n,per_page:100});case 5:r=t.sent,a.areas=r.data.map((function(e){return{value:e.id,label:e.name||"".concat(e.province,"_").concat(e.id)}})),a.province=n;case 8:case"end":return t.stop()}}),t)})))()}}},I=x,S=Object(C["a"])(I,s,c,!1,null,null,null),L=S.exports,j=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.title,width:720,visible:e.visible,confirmLoading:e.confirmLoading,maskClosable:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"仓储名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入仓储名称"}]}],expression:"['name', {rules: [{required: true, message: '请输入仓储名称'}]}]"}]})],1),t("a-form-item",{attrs:{label:"联系人姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contact_name",{rules:[{required:!0,message:"请输入联系人姓名"}]}],expression:"['contact_name', {rules: [{required: true, message: '请输入联系人姓名'}]}]"}]})],1),t("a-form-item",{attrs:{label:"联系电话",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contact_phone",{rules:[{required:!0,message:"请输入联系电话"}]}],expression:"['contact_phone', {rules: [{required: true, message: '请输入联系电话'}]}]"}]})],1),t("a-form-item",{attrs:{label:"选择地区",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("SelectRegion",{directives:[{name:"decorator",rawName:"v-decorator",value:["cascader",{rules:[{required:!0,message:"请选择省市区"}]}],expression:"['cascader', {rules: [{required: true, message: '请选择省市区'}]}]"}],attrs:{placeholder:"请选择省市区"},on:{change:e.onCascaderChange}})],1),t("a-form-item",{attrs:{label:"地图选点",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.lng)+", "+e._s(e.lat)+" "),t("a-button",{attrs:{type:"primary"},on:{click:e.openSelectMap}},[e._v("打开地图选择位置")]),t("SelectMapPoint",{ref:"SelectMap",attrs:{lng:e.lng,lat:e.lat},on:{complete:e.onSelectMap},model:{value:e.showMap,callback:function(a){e.showMap=a},expression:"showMap"}})],1),t("a-form-item",{attrs:{label:"详细地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"请输入详细地址"}]}],expression:"['address', {rules: [{required: true, message: '请输入详细地址'}]}]"}]})],1),t("a-form-item",{attrs:{label:"所属区域",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["area_id",{rules:[{required:!1}]}],expression:"['area_id', {rules: [{required: false}]}]"}],attrs:{options:e.areas}})],1)],1)],1)],1)},U=[],O=(t("88bc"),{components:{SelectRegion:l["h"],SelectMapPoint:k},data:function(){return{title:"编辑地址",labelCol:{span:7},wrapperCol:{span:13},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),record:{},showMap:!1,lng:null,lat:null,areas:[],province:""}},methods:{edit:function(e){this.visible=!0,this.record=e,this.setFieldsValue()},setFieldsValue:function(){var e=this,a=this.record,t=this.form.setFieldsValue;a.cascader=[a.province,a.city,a.district],this.lng=a.longitude,this.lat=a.latitude,this.$nextTick((function(){t(a)})),m({province:a.province,per_page:100}).then((function(a){e.areas=a.data.map((function(e){return{value:e.id,label:e.name||"".concat(e.province,"_").concat(e.id)}}))})),this.province=a.province},handleSubmit:function(e){var a=this;e.preventDefault();var t=this.form.validateFields;t((function(e,t){!e&&a.onFormSubmit(t)}))},handleCancel:function(){this.visible=!1,this.form.resetFields()},onFormSubmit:function(e){var a=this;this.confirmLoading=!0;var t=Object(u["a"])(e.cascader,3),n=t[0],r=t[1],l=t[2];delete e.cascader,i["d"](this.record.id,Object(o["a"])(Object(o["a"])({},e),{},{province:n,city:r,district:l,longitude:this.lng,latitude:this.lat})).then((function(t){a.$message.success("已修改",1.5),a.handleCancel(),a.$emit("handleSubmit",e)})).finally((function(){a.confirmLoading=!1}))},openSelectMap:function(){this.showMap=!0;var e=this.form,a=(e.setFieldsValue,e.getFieldsValue),t=a();this.$refs.SelectMap.onOpen({city:t.cascader[1]||t.cascader[0],lng:this.lng,lat:this.lat})},onSelectMap:function(e){var a=this.form,t=a.setFieldsValue,n=a.getFieldsValue;this.lng=e.lng,this.lat=e.lat;var r=n();r.address||(r.address=e.address,t(r))},onCascaderChange:function(e){var a=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n="",e.length&&(n=e[0]),n==a.province){t.next=8;break}return t.next=5,m({province:n,per_page:100});case 5:r=t.sent,a.areas=r.data.map((function(e){return{value:e.id,label:e.name||"".concat(e.province,"_").concat(e.id)}})),a.province=n;case 8:case"end":return t.stop()}}),t)})))()}}}),q=O,F=Object(C["a"])(q,j,U,!1,null,null,null),P=F.exports,$={name:"Index",components:{STable:l["c"],AddForm:L,EditForm:P},data:function(){var e=this;return{queryParam:{},isLoading:!1,columns:[{title:"所属区域ID",dataIndex:"delivery_area_id"},{title:"仓储名",dataIndex:"name"},{title:"联系人姓名",dataIndex:"contact_name"},{title:"联系电话",dataIndex:"contact_phone"},{title:"详细地址",dataIndex:"full_address",scopedSlots:{customRender:"full_address"}},{title:"评分",dataIndex:"rating"},{title:"添加时间",dataIndex:"created_at"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(a){return i["e"](Object(o["a"])(Object(o["a"])({},a),e.queryParam)).then((function(e){return e}))}}},created:function(){},methods:{handleAdd:function(){this.$refs.AddForm.add()},handleEdit:function(e){this.$refs.EditForm.edit(e)},handleDelete:function(e){var a=this,t=this.$confirm({title:"您确定要删除该记录吗?",content:"删除后不可恢复",onOk:function(){return i["c"](e.id).then((function(e){a.$message.success("已删除",1.5),a.handleRefresh()})).finally((function(e){t.destroy()}))}})},handleRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(e)},onSearch:function(){this.handleRefresh(!0)}}},R=$,E=Object(C["a"])(R,n,r,!1,null,null,null);a["default"]=E.exports}}]);
(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[766],{44248:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return B}});var s={};a.r(s),a.d(s,{overview:function(){return w},statistics:function(){return I}});var r=function(){var t=this,e=t._self._c;return e("a-spin",{attrs:{spinning:t.isLoading}},[e("div",{staticClass:"container"},[e("a-card",{staticClass:"overview",attrs:{bordered:!1}},[e("div",{staticClass:"card-title"},[e("span",[t._v("数据概况")])]),e("div",{staticClass:"screen flex flex-x-center"},[e("a-range-picker",{attrs:{format:"YYYY-MM-DD"},on:{change:t.onPickerChange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}}),e("div",{staticClass:"shortcut"},[e("div",{staticClass:"shortcut-days"},[e("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.handleFastDate(7)}}},[t._v("7天")]),e("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.handleFastDate(30)}}},[t._v("30天")]),e("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.handleFastDate(0)}}},[t._v("清空")])])])],1),e("a-row",{staticClass:"mt-20",attrs:{gutter:32}},[e("a-col",{attrs:{span:8}},[e("div",{staticClass:"item flex"},[e("div",{staticClass:"col-left"},[e("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[e("a-icon",{attrs:{component:t.Icons.overview.sale}})],1)]),e("div",{staticClass:"col-right"},[e("p",{staticClass:"name"},[t._v("销售额 (元)")]),e("p",{staticClass:"value"},[t._v(t._s(t.periodData.orderTotalPrice))])])])]),e("a-col",{attrs:{span:8}},[e("div",{staticClass:"item flex"},[e("div",{staticClass:"col-left small"},[e("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[e("a-icon",{attrs:{component:t.Icons.statistics.order}})],1)]),e("div",{staticClass:"col-right"},[e("p",{staticClass:"name"},[t._v("支付订单数 (笔)")]),e("p",{staticClass:"value"},[t._v(t._s(t.periodData.orderTotal))])])])]),e("a-col",{attrs:{span:8}},[e("div",{staticClass:"item flex"},[e("div",{staticClass:"col-left small"},[e("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[e("a-icon",{attrs:{component:t.Icons.statistics.goods}})],1)]),e("div",{staticClass:"col-right"},[e("p",{staticClass:"name"},[t._v("销售商品数量 (件)")]),e("p",{staticClass:"value"},[t._v(t._s(t.periodData.orderItemTotal))])])])])],1),e("a-row",{staticClass:"mt-20",attrs:{gutter:32}},[e("a-col",{attrs:{span:8}},[e("div",{staticClass:"item flex"},[e("div",{staticClass:"col-left"},[e("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[e("a-icon",{attrs:{component:t.Icons.statistics.user}})],1)]),e("div",{staticClass:"col-right"},[e("p",{staticClass:"name"},[t._v("会员数量")]),e("p",{staticClass:"value"},[t._v(t._s(t.statistics.userTotal))])])])]),e("a-col",{attrs:{span:8}},[e("div",{staticClass:"item flex"},[e("div",{staticClass:"col-left"},[e("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[e("a-icon",{attrs:{component:t.Icons.statistics.consume}})],1)]),e("div",{staticClass:"col-right"},[e("p",{staticClass:"name"},[t._v("消费人数")]),e("p",{staticClass:"value"},[t._v(t._s(t.periodData.consumeUserTotal))])])])]),e("a-col",{attrs:{span:8}},[e("div",{staticClass:"item flex"},[e("div",{staticClass:"col-left"},[e("div",{staticClass:"icon-body flex flex-x-center flex-y-center"},[e("a-icon",{attrs:{component:t.Icons.statistics.recharge}})],1)]),e("div",{staticClass:"col-right"},[e("p",{staticClass:"name"},[t._v("用户充值总额 (元)")]),e("p",{staticClass:"value"},[t._v(t._s(t.periodData.rechargeTotalMoney))])])])])],1)],1),e("a-card",{staticClass:"trade-trend mt-20",attrs:{bordered:!1}},[e("div",{staticClass:"card-title"},[e("span",[t._v("近七日交易走势")])]),e("div",{staticClass:"echarts-body"},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"main"}})])]),e("a-row",{staticClass:"ranking mt-20",attrs:{gutter:32}},[e("a-col",{staticClass:"ranking-item",attrs:{span:12}},[e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"card-title"},[e("span",[t._v("商品销售榜")])]),e("a-table",{attrs:{rowKey:"id",columns:t.goodsRankingColumns,dataSource:t.goodsRanking,pagination:!1},scopedSlots:t._u([{key:"index",fn:function(a,s,r){return[r<3&&s.sold_count>0?e("div",{staticClass:"ranking-img"},[e("img",{attrs:{src:"static/img/statistics/ranking/0".concat(r+1,".png"),alt:""}})]):e("span",[t._v(t._s(r+1))])]}},{key:"goods_name",fn:function(a){return[e("p",{staticClass:"oneline-hide",staticStyle:{width:"240px"}},[t._v(t._s(a))])]}}])})],1)],1),e("a-col",{staticClass:"ranking-item",attrs:{span:12}},[e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"card-title"},[e("span",[t._v("用户消费榜")])]),e("a-table",{attrs:{rowKey:"id",columns:t.userRankingColumns,dataSource:t.userExpendRanking,pagination:!1},scopedSlots:t._u([{key:"index",fn:function(a,s,r){return[r<3&&s.cumulative_consumption>0?e("div",{staticClass:"ranking-img"},[e("img",{attrs:{src:"static/img/statistics/ranking/0".concat(r+1,".png"),alt:""}})]):e("span",[t._v(t._s(r+1))])]}}])})],1)],1)],1)],1)])},i=[],n=a(7609),o=a.n(n),c=(a(90190),a(94864)),l=a(5893),d=a(17498),u=a(82899),p=a.n(u),f=a(43644),v=a.n(f),m=a(2338),h=a.n(m),g=a(17148),_=a.n(g),x=a(46651),y=a.n(x),C=a(36454),D=a.n(C),k=a(18465),b=a.n(k),w={sale:p(),increase:v()},I={goods:h(),order:_(),user:y(),consume:D(),recharge:b()},S=a(61145),T=a(95093),Y=a.n(T),P=a(2543),R=a.n(P),M=[{title:"排名",dataIndex:"index",align:"center",scopedSlots:{customRender:"index"}},{title:"商品名称",dataIndex:"title",scopedSlots:{customRender:"goods_name"}},{title:"销量 (件)",align:"center",dataIndex:"sold_count"},{title:"售价 (元)",align:"center",dataIndex:"price_lowest"}],F=[{title:"排名",dataIndex:"index",align:"center",scopedSlots:{customRender:"index"}},{title:"会员昵称",dataIndex:"nickname",scopedSlots:{customRender:"nickname"}},{title:"实际消费金额 (元)",align:"center",dataIndex:"cumulative_consumption"}],V={name:"Index",data:function(){return{Icons:s,isLoading:!1,statistics:{},periodData:{consumeUserTotal:0,orderTotal:0,orderItemTotal:0,orderTotalPrice:0,rechargeTotalMoney:0},goodsRanking:[],userExpendRanking:[],ordersDaily:[],dateValue:[],goodsRankingColumns:M,userRankingColumns:F}},created:function(){this.getData()},methods:{onPickerChange:function(){this.getPeriodData()},handleFastDate:function(t){this.dateValue=0===t?[]:[Y()((0,S.yY)(-t)),Y()((0,S.yY)(0))],this.getPeriodData()},getPeriodData:function(){var t=this;this.isLoading=!0;var e=this.dateValue,a=e.length?[e[0].format("YYYY-MM-DD"),e[1].format("YYYY-MM-DD")]:[Y()().subtract(30,"d").format("YYYY-MM-DD"),Y()().format("YYYY-MM-DD")];c.Kx({date_between:a}).then((function(e){t.ordersDaily=e.data,t.dateValue.length?(t.periodData.orderTotal=R()(t.ordersDaily).sumBy("order_count"),t.periodData.orderItemTotal=R()(t.ordersDaily).sumBy("order_item_count"),t.periodData.orderTotalPrice=R()(t.ordersDaily).sumBy("turnover")):(t.periodData.orderTotal=t.statistics.orderTotal,t.periodData.orderItemTotal=t.statistics.orderItemTotal,t.periodData.orderTotalPrice=t.statistics.orderTotalPrice),t.$nextTick((function(){t.myEcharts()}))})).finally((function(){t.isLoading=!1}))},getData:function(){var t=this;this.isLoading=!0,c.X5({store_id:this.$store.getters.storeId}).then((function(e){t.statistics=e,l.p_({sort:"sold_count_desc",per_page:5}).then((function(e){t.goodsRanking=e.data})),d.p_({account_sort:"cumulative_consumption_desc",per_page:5}).then((function(e){t.userExpendRanking=e.data})),t.getPeriodData()})).finally((function(){t.isLoading=!1}))},myEcharts:function(){this.data;var t=o().init(document.getElementById("main"),"fresh-cut"),e={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["成交额","毛利","成交量"]},xAxis:[{type:"category",data:R()(this.ordersDaily).map("date").value(),axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"金额",axisLabel:{formatter:"¥{value}"}},{type:"value",name:"单量",axisLabel:{formatter:"{value} 单"}}],series:[{name:"成交额",type:"bar",tooltip:{valueFormatter:function(t){return t+" 元"}},data:R()(this.ordersDaily).map("turnover").value()},{name:"毛利",type:"bar",tooltip:{valueFormatter:function(t){return t+" 元"}},data:R()(this.ordersDaily).map("gross_profit").value()},{name:"成交量",type:"line",yAxisIndex:1,tooltip:{valueFormatter:function(t){return t+" 单"}},data:R()(this.ordersDaily).map("order_count").value()}]};t.setOption(e)}}},L=V,A=a(81656),E=(0,A.A)(L,r,i,!1,null,"0b981e0c",null),B=E.exports},18465:function(t,e,a){var s=a(83510)["default"],r=a(10808)["default"],i=["class","staticClass","style","staticStyle","attrs"];t.exports={functional:!0,render:function(t,e){var a=e._c,n=(e._v,e.data),o=e.children,c=void 0===o?[]:o,l=n.class,d=n.staticClass,u=n.style,p=n.staticStyle,f=n.attrs,v=void 0===f?{}:f,m=r(n,i);return a("svg",s({class:["recharge_svg__icon",l,d],style:[u,p],attrs:Object.assign({viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},v)},m),c.concat([a("path",{attrs:{d:"M829.798 641.927c19.058 0 31.786 12.727 31.786 31.786v127.08h127.08c19.123 0 31.786 12.792 31.786 31.85s-19.058 31.787-31.786 31.787l-127.08-.064V991.51c0 12.728-19.06 31.786-31.786 31.786-19.06 0-31.787-12.727-31.787-31.786V864.366H670.867c-19.06 0-31.722-12.664-31.722-31.722 0-19.123 12.663-31.787 31.722-31.787l127.144-.064v-127.08c0-19.06 12.728-31.786 31.787-31.786zM512 0c279.68 0 508.45 228.835 508.45 508.45 0 25.455 0 50.845-6.395 82.632 0 19.059-18.995 31.786-38.054 25.454-19.059 0-31.786-19.059-25.455-38.182 6.396-25.39 6.396-44.45 6.396-69.904A442.192 442.192 0 00512 63.572c-247.894 0-444.942 203.38-444.942 451.274A442.192 442.192 0 00512 959.724c25.454 0 57.177 0 82.631-6.395 19.06-6.332 31.786 6.395 38.118 25.454 6.396 19.059-6.396 31.786-25.39 38.182H512C232.32 1016.9 3.55 788.13 3.55 508.45 3.55 228.77 232.32 0 512 0zm92.416 262.86a30.06 30.06 0 0139.909-14.455 30.06 30.06 0 0114.454 39.909l-84.102 180.484H705.85a30.06 30.06 0 010 60.054H542.059v63.956h92.417c20.594 0 37.478 13.431 37.478 29.996 0 16.437-16.884 29.931-37.478 29.931h-92.417v94.975a30.06 30.06 0 01-29.995 29.931 30.06 30.06 0 01-29.995-29.931v-94.975h-92.48c-20.595 0-37.48-13.43-37.48-29.931s16.885-30.06 37.48-30.06h92.352v-63.956H318.213a30.06 30.06 0 01-30.06-29.931 30.06 30.06 0 0129.996-29.995h131.174l-84.102-180.42a30.06 30.06 0 0154.363-25.39L512 461.25z"}})]))}}},5893:function(t,e,a){"use strict";a.d(e,{$E:function(){return v},ED:function(){return f},Fb:function(){return _},KF:function(){return p},Kv:function(){return y},WQ:function(){return d},_0:function(){return c},eV:function(){return o},hc:function(){return u},jF:function(){return m},p6:function(){return x},p_:function(){return n},wk:function(){return l},xG:function(){return h},zR:function(){return g}});var s=a(57888),r=a(26222),i={list:"/products",listByIds:"/products",detail:"/products/{id}",basic:"/goods/basic",add:"/products",edit:"/products/{id}",batchDelete:"/products",batchDeleteSkus:"/products/sku",state:"/goods/state",saveSpec:"/products/{id}/spec",saveSku:"/products/{id}/sku",copySku:"/products/copy_sku",schedulePrice:"/products/{id}/scheduled_price",editSchedulePrice:"/products/{id}/scheduled_price/{schedule_id}"};function n(t){return(0,r.p)({url:i.list,method:"get",params:t})}function o(t,e){return(0,r.p)({url:i.listByIds,method:"get",params:(0,s.A)({ids:t,per_page:99},e)})}function c(t,e){return(0,r.p)({url:i.detail.replace("{id}",t),method:"get",params:e})}function l(t){return(0,r.p)({url:i.state,method:"post",data:t})}function d(t){return(0,r.p)({url:i.add,method:"post",data:t})}function u(t,e){return(0,r.p)({url:i.edit.replace("{id}",t),method:"patch",data:e})}function p(t){return(0,r.p)({url:i.batchDelete,method:"delete",data:t})}function f(t){return(0,r.p)({url:i.batchDeleteSkus,method:"delete",data:t})}function v(t,e){return(0,r.p)({url:i.saveSpec.replace("{id}",t),method:"put",data:e})}function m(t,e){return(0,r.p)({url:i.saveSku.replace("{id}",t),method:"put",data:e})}function h(t){return(0,r.p)({url:i.copySku,method:"post",data:t})}function g(t,e){return(0,r.p)({url:i.schedulePrice.replace("{id}",t),method:"post",data:e})}function _(t,e){return(0,r.p)({url:i.schedulePrice.replace("{id}",t),method:"get",params:e})}function x(t,e,a){return(0,r.p)({url:i.editSchedulePrice.replace("{id}",t).replace("{schedule_id}",e),method:"patch",params:a})}function y(t,e,a){return(0,r.p)({url:i.editSchedulePrice.replace("{id}",t).replace("{schedule_id}",e),method:"delete",params:a})}},17498:function(t,e,a){"use strict";a.d(e,{KF:function(){return c},Q3:function(){return n},on:function(){return o},p_:function(){return i}});var s=a(26222),r={list:"/users",detail:"/users/{id}",recharge:"/user/recharge",grade:"/user/grade",delete:"/user/delete"};function i(t){return(0,s.p)({url:r.list,method:"get",params:t})}function n(t){return(0,s.p)({url:r.recharge,method:"post",data:t})}function o(t){return(0,s.p)({url:r.grade,method:"post",data:t})}function c(t){return(0,s.p)({url:r.delete,method:"post",data:t})}}}]);